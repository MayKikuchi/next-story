{"version":3,"sources":["containers/Container/index.tsx","components/AddToUserButton/index.tsx","containers/NextStoryTagsPage/index.tsx"],"names":["StyledContainer","styled","Container","MarginContainer","props","maxWidth","children","StyledButton","button","theme","isAddedToUser","palette","grey","primary","light","AddToUserButton","addLabel","removeLabel","isAdded","toBackendOnClick","useState","setIsAddedToUser","useEffect","onClick","TagDiv","div","last","NextStoryTagsPage","allTags","setAllTags","userFavTags","setUserFavTags","axios","get","then","res","sortedTags","data","sort","a","b","tagName","catch","error","console","log","sessionDataString","sessionStorage","getItem","sessionDataObj","JSON","parse","userId","userFavTagIds","map","t","tagId","variant","gutterBottom","color","index","isAFavTag","filter","tag","length","shouldRemoveOnClick","key","fontWeight","fontSize","mb","display","justifyContent","shouldRemove","put","addOrRemoveTagFromFavorites","tagDescription"],"mappings":"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","file":"static/js/13.6c8793b3.chunk.js","sourcesContent":["import React, {ReactNode} from 'react';\r\nimport Container from '@material-ui/core/Container';\r\nimport styled from 'styled-components';\r\n\r\nconst StyledContainer = styled(Container)`\r\n    margin-top: 85px;\r\n`;\r\n\r\ninterface MarginContainerProps {\r\n    maxWidth: 'lg'\r\n        | 'md'\r\n        | 'sm'\r\n        | 'xl'\r\n        | 'xs'\r\n        | false;\r\n    children: ReactNode;\r\n}\r\n\r\nconst MarginContainer: React.FC<MarginContainerProps> = (props: MarginContainerProps) => {\r\n    return (\r\n        <StyledContainer maxWidth={props.maxWidth}>{props.children}</StyledContainer>\r\n    );\r\n};\r\n\r\nexport default MarginContainer;\r\n","import styled from 'styled-components';\r\nimport React, {useEffect, useState} from 'react';\r\n\r\nconst StyledButton = styled.button<{ isAddedToUser: boolean }>`\r\n    background-color: ${({ theme, isAddedToUser }) => isAddedToUser ? theme.palette.grey[300] : theme.palette.primary.light};\r\n    border: none;\r\n    outline: none;\r\n    font-size: 16px;\r\n    border-radius: 5px;\r\n    padding: 5px;\r\n    cursor: pointer;\r\n    margin: 5px;\r\n    color: ${({ isAddedToUser }) => isAddedToUser ? 'black' : 'white'};\r\n`;\r\n\r\ninterface AddToUserButtonProps {\r\n    addLabel: string;\r\n    removeLabel: string;\r\n    isAdded: boolean;\r\n    toBackendOnClick: any;\r\n}\r\n\r\nconst AddToUserButton: React.FC<AddToUserButtonProps> = (props: AddToUserButtonProps) => {\r\n    const { addLabel, removeLabel,isAdded, toBackendOnClick } = props;\r\n    const [isAddedToUser, setIsAddedToUser] = useState<boolean>(false);\r\n\r\n    useEffect(() => {\r\n        setIsAddedToUser(isAdded);\r\n    }, [isAdded]);\r\n\r\n    const toggleAddedToUser = () => {\r\n        if (isAddedToUser) {\r\n            setIsAddedToUser(false);\r\n        } else {\r\n            setIsAddedToUser(true);\r\n        }\r\n        toBackendOnClick();\r\n    };\r\n\r\n    return (\r\n        <StyledButton\r\n            isAddedToUser={isAddedToUser}\r\n            onClick={() => toggleAddedToUser()}\r\n        >\r\n            {isAddedToUser ? removeLabel : addLabel}\r\n        </StyledButton>\r\n    );\r\n};\r\n\r\nexport default AddToUserButton;\r\n","import React, {useEffect, useState} from 'react';\r\nimport Container from '../Container';\r\nimport axios from 'axios';\r\nimport {Box, Typography} from '@material-ui/core';\r\nimport styled from 'styled-components';\r\nimport AddToUserButton from '../../components/AddToUserButton';\r\n\r\nconst TagDiv = styled.div<{ last: boolean }>`\r\n    border-top: 2px solid ${({ theme }) => theme.palette.grey[400]};\r\n    border-bottom: ${({ theme, last }) => last && `2px solid ${theme.palette.grey[400]}`};\r\n    min-height: 50px;\r\n    padding: 10px;\r\n`;\r\n\r\nconst NextStoryTagsPage: React.FC = () => {\r\n    const [allTags, setAllTags] = useState<Array<{ tagId: string, tagName: string, tagDescription: string }>>([]);\r\n    const [userFavTags, setUserFavTags] = useState<Array<string>>([]);\r\n\r\n    useEffect(() => {\r\n        axios.get('/nextStoryTags')\r\n            .then((res: any) => {\r\n                const tagData = res.data;\r\n                const sortedTags = tagData.sort(function(a: any, b: any) {\r\n                    if(a.tagName < b.tagName) { return -1; }\r\n                    if(a.tagName > b.tagName) { return 1; }\r\n                    return 0;\r\n                });\r\n                setAllTags(sortedTags);\r\n            })\r\n            .catch((error: any) => {\r\n                console.log('Error getting all tags', error);\r\n            });\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const sessionDataString = sessionStorage.getItem('NS-session-data');\r\n        const sessionDataObj = sessionDataString && JSON.parse(sessionDataString);\r\n        const userId = sessionDataObj?.userId;\r\n        axios.get(`/users/favoriteNSTags/${userId}`)\r\n            .then((res: any) => {\r\n                const userFavTags = res.data;\r\n                const userFavTagIds = userFavTags.map((t: any) => t.tagId);\r\n                setUserFavTags(userFavTagIds);\r\n            })\r\n            .catch((error: any) => {\r\n                console.log('Error getting all tags', error);\r\n            });\r\n    }, []);\r\n\r\n    const addOrRemoveTagFromFavorites = (tag: any, shouldRemove: boolean) => {\r\n        const sessionDataString = sessionStorage.getItem('NS-session-data');\r\n        const sessionDataObj = sessionDataString && JSON.parse(sessionDataString);\r\n        const userId = sessionDataObj?.userId;\r\n        axios.put(`/users/favoriteNSTags/putToFavorites/${userId}/${shouldRemove}`, {tag: tag})\r\n            .then((res: any) => {\r\n                console.log(res.data);\r\n            })\r\n            .catch((error: any) => {\r\n                console.log('Error getting all tags', error);\r\n            });\r\n    };\r\n\r\n    return (\r\n        <Container maxWidth='md'>\r\n            <Typography variant={'h1'} gutterBottom>All our story tags!</Typography>\r\n            <Typography variant={'h3'} color={'primary'} gutterBottom>\r\n                Use these tags to filter stories, or add them to stories yourself\r\n            </Typography>\r\n            {allTags.map((t: any, index) => {\r\n                const isAFavTag = userFavTags.filter((tag: any) => {\r\n                    return t.tagId === tag;\r\n                }).length > 0;\r\n                const shouldRemoveOnClick = isAFavTag;\r\n                return (\r\n                    <TagDiv key={index} last={index + 1 === allTags.length}>\r\n                        <Box\r\n                            fontWeight={'fontWeightBold'}\r\n                            fontSize={24}\r\n                            mb={1}\r\n                            display={'flex'}\r\n                            justifyContent={'space-between'}\r\n                        >\r\n                            {t.tagName}\r\n                            <AddToUserButton\r\n                                addLabel={'Add to favorites'}\r\n                                removeLabel={'Remove from favorites'}\r\n                                isAdded={isAFavTag}\r\n                                toBackendOnClick={() => addOrRemoveTagFromFavorites(t, shouldRemoveOnClick)}\r\n                            />\r\n                        </Box>\r\n                        <Typography>{t.tagDescription}</Typography>\r\n                    </TagDiv>\r\n                );\r\n            })}\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default NextStoryTagsPage;\r\n"],"sourceRoot":""}