{"version":3,"sources":["containers/Container/index.tsx","assets/MockCover.png","constants/dataTypes.ts","components/TagButton/index.tsx","components/TagsSection/index.tsx","components/Button/index.tsx","components/CommentEditor/index.tsx","actions/reviewRatingActions.ts","components/StarRater/index.tsx","components/CommentBlock/index.tsx","utils/styleHelpers.ts","components/ReviewList/index.tsx","containers/MediaPage/index.tsx"],"names":["StyledContainer","styled","Container","MarginContainer","props","maxWidth","children","module","exports","MediaType","StyledTagButton","button","theme","palette","primary","light","secondary","TagButton","tag","StyledTagsSection","div","TagsSection","tags","tagObjects","map","index","key","tagObject","tagName","StyledButton","color","grey","fontSize","main","Button","onClick","label","CommentEditorAction","TextArea","textarea","host","window","location","protocol","connect","addReviewAction","reviewObject","type","ADD_REVIEW","text","userId","userName","datePosted","editReviewAction","EDIT_REVIEW","useState","editCommentProps","review","currentText","setCurrentText","value","onChange","event","target","style","textAlign","addCommentProps","now","Date","toString","actionType","Add","rating","undefined","axios","put","mediaId","mediaType","userRating","then","res","console","log","catch","err","Edit","closeEdit","StyledIconButton","IconButton","VerticallyCenteredDiv","changeRatingAction","CHANGE_RATING","ratedStar","setStar","readonly","readOnlyRating","hideReadOnlyLabel","twoDecimalRatingString","clickStar","starIndex","ratingToSet","userHasReviewText","delete","changeRating","toFixed","useEffect","Box","display","Array","star","split","wholeNumberString","decimalString","wholeNumber","parseInt","decimalTimes100","fill","closestFifty","Math","round","getIcon","size","ml","Review","isCurrentUserComment","TopBar","ExpandableDiv","expanded","ShowMoreButton","ShowLessButton","deleteReviewAction","DELETE_REVIEW","isEdit","setIsEdit","setExpanded","hasOverflow","setHasOverflow","expandableRef","useRef","currentUserId","date","toDateString","isAuthor","useMemo","isOverflowing","ref","element","current","scrollHeight","clientHeight","scrollWidth","clientWidth","hasDivOverflown","Typography","variant","reviewUserName","deleteReview","mr","source","state","ownProps","reviews","reviewRatings","filter","r","otherUserReviews","currentUserReview","forEach","push","addCommentEditorOpen","setAddCommentEditor","hasAddedReview","initialStateReviews","slice","stateReviews","setStateReviews","rerenderReviews","totalReviews","length","gutterBottom","dataLength","next","setTimeout","theFetchNum","fetchedReviews","hasMore","loader","endMessage","StyledImage","img","StyledGridItem","Grid","CenteredDiv","AddToUserButton","isAddedToUser","StyledFormControl","FormControl","loadAllReviewsAction","reviewsArray","LOAD_REVIEWS_FROM_DB","pathname","o","id","isForLater","setForLater","isFavorite","setFavorite","watchedOrRead","setWatchedOrRead","title","movie","image","people","genres","blurb","avgRating","mediaObject","setMediaObject","booksRead","moviesWatched","watchLater","readLater","favoriteMovies","favoriteBooks","favoriteAuthors","favoriteDirectors","setUserLists","storyTags","setStoryTags","unaddedStoryTags","setUnaddedStoryTags","addedStoryTags","setAddedStoryTags","sessionDataString","sessionStorage","getItem","sessionDataObj","JSON","parse","username","mediaRouteType","book","get","mediaRes","reviewRatingRes","data","reviewArray","userRatingReviewArr","MockCover","average","nextStoryTags","error","response","userLists","includes","sortedTags","sort","a","b","storyTagNames","t","unAdded","added","updateMediaInDB","tagsArray","addOrRemoveCall","action","container","direction","spacing","item","sm","src","addOrRemoveWatchOrRead","addOrRemoveWatchReadLater","addOrRemoveFavorites","fontStyle","InputLabel","Select","labelId","newAddedTags","MenuItem","filteredStoryTags","tagId"],"mappings":"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","file":"static/js/10.b6e0e984.chunk.js","sourcesContent":["import React, {ReactNode} from 'react';\r\nimport Container from '@material-ui/core/Container';\r\nimport styled from 'styled-components';\r\n\r\nconst StyledContainer = styled(Container)`\r\n    margin-top: 85px;\r\n`;\r\n\r\ninterface MarginContainerProps {\r\n    maxWidth: 'lg'\r\n        | 'md'\r\n        | 'sm'\r\n        | 'xl'\r\n        | 'xs'\r\n        | false;\r\n    children: ReactNode;\r\n}\r\n\r\nconst MarginContainer: React.FC<MarginContainerProps> = (props: MarginContainerProps) => {\r\n    return (\r\n        <StyledContainer maxWidth={props.maxWidth}>{props.children}</StyledContainer>\r\n    );\r\n};\r\n\r\nexport default MarginContainer;\r\n","module.exports = __webpack_public_path__ + \"static/media/MockCover.4d59545d.png\";","export enum MediaType {\r\n    movie = 'movie',\r\n    book = 'book'\r\n}\r\n\r\nexport type CardData = {\r\n    title: string,\r\n    id: string,\r\n    mediaType: MediaType,\r\n    image: string, // the url, etc to the image\r\n    genres: string[],\r\n    nextStoryTags: string[],\r\n    people: string,\r\n    blurb: string,\r\n    avgRating: number\r\n}\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\ninterface TagsButtonProps {\r\n    tag: string;\r\n}\r\n\r\nconst StyledTagButton = styled.button`\r\n    border-radius: 7px;\r\n    color: white;\r\n    outline: none;\r\n    border: none;\r\n    margin: 5px;\r\n    cursor: pointer;\r\n    background-color: ${({ theme }) => theme.palette.primary.light};\r\n    &:hover {\r\n        background-color: ${({ theme }) => theme.palette.secondary.light};\r\n    }\r\n    font-size: 16px;\r\n    padding: 3px 5px 3px 5px;\r\n`;\r\n\r\nconst TagButton: React.FC<TagsButtonProps> = (props: TagsButtonProps) => {\r\n    const { tag } = props;\r\n    return (\r\n        <>\r\n            {tag && <StyledTagButton>{tag}</StyledTagButton>}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default TagButton;\r\n","import React from 'react';\r\nimport TagButton from '../TagButton';\r\nimport styled from 'styled-components';\r\n\r\ninterface TagsSectionProps {\r\n    tags?: string[],\r\n    tagObjects?: Array<{ tagId: string, tagName: string }>\r\n}\r\n\r\nconst StyledTagsSection = styled.div`\r\n    margin-bottom: 15px;\r\n`;\r\n\r\nconst TagsSection: React.FC<TagsSectionProps> = (props: TagsSectionProps) => {\r\n    const { tags, tagObjects } = props;\r\n    return (\r\n        <StyledTagsSection>\r\n            { tags && tags.map((tag, index) => <TagButton key={index} tag={tag}/>) }\r\n            { !tags && tagObjects && tagObjects.map((tagObject, index) => <TagButton key={index} tag={tagObject.tagName}/>) }\r\n        </StyledTagsSection>\r\n    );\r\n};\r\n\r\nexport default TagsSection;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst StyledButton = styled.button<{fontSize?: string, color?: string}>`\r\n    margin-right: 10px;\r\n    background: none;\r\n    border: none;\r\n    color: ${(props) => props.color} || ${({ theme }) => theme.palette.grey[500]};\r\n    cursor: pointer;\r\n    font-size: ${(props) => props.fontSize || '16px'};\r\n\r\n    &:hover {\r\n        color: ${({ theme }) => theme.palette.primary.main};\r\n    }\r\n`;\r\n\r\ninterface ButtonProps {\r\n    onClick: () => void;\r\n    label?: string;\r\n    children?: string;\r\n    fontSize?: string;\r\n    color?: string;\r\n}\r\n\r\nconst Button: React.FC<ButtonProps> = (props: ButtonProps) => {\r\n    const {onClick, label, children, color} = props;\r\n    return (\r\n        <StyledButton onClick={onClick} color={color}>\r\n            {label || children}\r\n        </StyledButton>\r\n    );\r\n};\r\n\r\nexport default Button;\r\n","import React, { useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport Button from '../Button';\r\nimport {connect} from 'react-redux';\r\nimport {addReviewAction, editReviewAction, ReviewObjectType} from '../../actions/reviewRatingActions';\r\nimport axios from 'axios';\r\n\r\nconst TextArea = styled.textarea`\r\n    height: 100px;\r\n    width: 99%;\r\n    resize: vertical;\r\n    font-family: \"Roboto\", \"Helvetica\", \"Arial\", sans-serif\r\n`;\r\n\r\nexport enum CommentEditorAction {\r\n    Add,\r\n    Edit\r\n}\r\n\r\nconst host = window.location.protocol + '//'+ window.location.host;\r\n\r\nconst CommentEditor: React.FC<any> = (props: any) => {\r\n    const [currentText, setCurrentText] = useState(props.editCommentProps?.review.text || '');\r\n\r\n    const submit = () => {\r\n        const { editCommentProps, addCommentProps } = props;\r\n        const now = new Date().toString();\r\n        switch(props.actionType) {\r\n            case CommentEditorAction.Add:\r\n                props.addReviewAction({\r\n                    text: currentText,\r\n                    userId: addCommentProps.userId,\r\n                    userName: addCommentProps.userName,\r\n                    datePosted: now,\r\n                    rating: undefined\r\n                } as ReviewObjectType);\r\n                axios.put(host + '/reviewRatings/review',\r\n                    {\r\n                        mediaId: addCommentProps.mediaId,\r\n                        mediaType: addCommentProps.mediaType,\r\n                        userName: addCommentProps.userName,\r\n                        userId: addCommentProps.userId,\r\n                        rating: addCommentProps.userRating,\r\n                        datePosted: now,\r\n                        text: currentText\r\n                    })\r\n                    .then((res: any) => {\r\n                        console.log(res);\r\n                    })\r\n                    .catch((err: any) => {\r\n                        console.log(err);\r\n                    });\r\n                break;\r\n            case CommentEditorAction.Edit:\r\n                const userId = editCommentProps.review.userId;\r\n                props.editReviewAction({\r\n                    text: currentText,\r\n                    userId: userId,\r\n                    userName: editCommentProps.review.userName,\r\n                    datePosted: now\r\n                } as ReviewObjectType);\r\n                axios.put(host + '/reviewRatings/review',\r\n                    {\r\n                        mediaId: editCommentProps.mediaId,\r\n                        mediaType: editCommentProps.mediaType,\r\n                        userName: editCommentProps.review.userName,\r\n                        userId: editCommentProps.review.userId,\r\n                        rating: editCommentProps.userRating,\r\n                        datePosted: now,\r\n                        text: currentText\r\n                    })\r\n                    .then((res: any) => {\r\n                        console.log(res);\r\n                    })\r\n                    .catch((err: any) => {\r\n                        console.log(err);\r\n                    });\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n        props.closeEdit();\r\n    };\r\n\r\n    const changeMessageText = (event: any) => {\r\n        setCurrentText(event.target.value);\r\n    };\r\n\r\n    // TODO use a better editor - markdown text area? - for the text\r\n    return (\r\n        <>\r\n            <TextArea value={currentText} onChange={changeMessageText}/>\r\n            <div style={{textAlign: 'right'}}>\r\n                <Button onClick={submit}>Submit</Button>\r\n                <Button onClick={props.closeEdit}>Cancel</Button>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default connect(null, { addReviewAction, editReviewAction })(CommentEditor);\r\n","import {\r\n    ADD_REVIEW, CHANGE_RATING,\r\n    DELETE_REVIEW,\r\n    EDIT_REVIEW,\r\n    LOAD_REVIEWS_FROM_DB\r\n} from '../constants/reviewRatingConstants';\r\n\r\nexport interface ReviewObjectType {\r\n    text: string,\r\n    userId: string,\r\n    userName: string,\r\n    datePosted: string,\r\n    rating?: number | undefined\r\n}\r\n\r\nexport const loadAllReviewsAction = (reviewsArray: any[]) => {\r\n    return {\r\n        type: LOAD_REVIEWS_FROM_DB,\r\n        reviewsArray: reviewsArray\r\n    };\r\n};\r\n\r\nexport const addReviewAction = (reviewObject: ReviewObjectType) => {\r\n    return {\r\n        type: ADD_REVIEW,\r\n        text: reviewObject.text,\r\n        userId: reviewObject.userId,\r\n        userName: reviewObject.userName,\r\n        datePosted: reviewObject.datePosted\r\n    };\r\n};\r\n\r\nexport const deleteReviewAction = (userId: string) => {\r\n    return {\r\n        type: DELETE_REVIEW,\r\n        userId: userId\r\n    };\r\n};\r\n\r\nexport const editReviewAction = (reviewObject: ReviewObjectType) => {\r\n    return {\r\n        type: EDIT_REVIEW,\r\n        text: reviewObject.text,\r\n        userId: reviewObject.userId,\r\n        userName: reviewObject.userName,\r\n        datePosted: reviewObject.datePosted\r\n    };\r\n};\r\n\r\n\r\nexport const changeRatingAction = (reviewObject: { userId: string, userName: string, rating: number | undefined }) => {\r\n    return {\r\n        type: CHANGE_RATING,\r\n        userId: reviewObject.userId,\r\n        userName: reviewObject.userName,\r\n        rating: reviewObject.rating\r\n    };\r\n};\r\n","import React, {useEffect, useState} from 'react';\r\nimport StarBorderIcon from '@material-ui/icons/StarBorder';\r\nimport {Box, IconButton} from '@material-ui/core';\r\nimport StarIcon from '@material-ui/icons/Star';\r\nimport StarHalfIcon from '@material-ui/icons/StarHalf';\r\nimport styled from 'styled-components';\r\nimport {connect} from 'react-redux';\r\nimport {changeRatingAction} from '../../actions/reviewRatingActions';\r\nimport axios from 'axios';\r\nimport {MediaType} from '../../constants/dataTypes';\r\n\r\ninterface StarRaterProps {\r\n    readonly: boolean\r\n\r\n    // required if readonly === true\r\n    readOnlyRating?: number;\r\n    hideReadOnlyLabel?: boolean;\r\n\r\n    // required if readonly === false\r\n    userRating?: number;\r\n    userId?: string;\r\n    userName?: string;\r\n    userHasReviewText?: boolean;\r\n    mediaId?: string;\r\n    mediaType?: MediaType;\r\n}\r\n\r\nconst StyledIconButton = styled(IconButton)`\r\n    padding: 0px !important;\r\n`;\r\n\r\nconst VerticallyCenteredDiv = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n`;\r\n\r\nconst host = window.location.protocol + '//'+ window.location.host;\r\n\r\nconst getIcon = (index: number, rating: number | undefined) => {\r\n    const twoDecimalString = rating?.toFixed(2) || '0.00';\r\n    const [wholeNumberString, decimalString] = twoDecimalString.split('.');\r\n    const wholeNumber = parseInt(wholeNumberString);\r\n    const decimalTimes100 = parseInt(decimalString);\r\n    if ((index + 1) <= wholeNumber) {\r\n        return <StarIcon style={{fill: '#FFCC00'}} fontSize={'small'}/>;\r\n    } else if (index === wholeNumber) {\r\n        const closestFifty = Math.round(decimalTimes100 / 50)*50;\r\n        if (closestFifty === 0) {\r\n            return <StarBorderIcon style={{fill: '#FFCC00'}} fontSize={'small'}/>;\r\n        } else if (closestFifty === 50) {\r\n            return <StarHalfIcon style={{fill: '#FFCC00'}} fontSize={'small'}/>;\r\n        } else if (closestFifty === 100) {\r\n            return <StarIcon style={{fill: '#FFCC00'}} fontSize={'small'}/>;\r\n        }\r\n    } else {\r\n        return <StarBorderIcon style={{fill: '#FFCC00'}} fontSize={'small'}/>;\r\n    }\r\n};\r\n\r\nconst changeRating = (props: any, userId: string, userName: string, rating: number | undefined) => {\r\n    props.changeRatingAction({ userId, userName, rating });\r\n    if (!rating && !props.userHasReviewText) {\r\n        axios.delete(host + `/reviewRatings`\r\n            + `/${props.mediaType}/${props.mediaId}/${userId}`)\r\n            .then((res: any) => {\r\n                console.log('Successfully deleted the reviewRating', res);\r\n            })\r\n            .catch((err: any) => {\r\n                console.log(err);\r\n            });\r\n    } else {\r\n        axios.put(host + '/reviewRatings/rating',\r\n            {\r\n                mediaId: props.mediaId,\r\n                mediaType: props.mediaType,\r\n                userId: userId,\r\n                rating: rating\r\n            })\r\n            .then((res: any) => {\r\n                console.log('Successfully put the rating: ', res);\r\n            })\r\n            .catch((err: any) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n};\r\n\r\nconst StarRater: React.FC<StarRaterProps> = (props: StarRaterProps) => {\r\n    const [ratedStar, setStar] = useState(0);\r\n    const { readonly, readOnlyRating, hideReadOnlyLabel, userRating, userId, userName } = props;\r\n    let twoDecimalRatingString = ''; // TODO set up tooltip functionality\r\n    if (readonly && readOnlyRating) {\r\n        twoDecimalRatingString = readOnlyRating.toFixed(2);\r\n    } else if (userRating) {\r\n        twoDecimalRatingString = userRating.toFixed(2);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!ratedStar) {\r\n            setStar(userRating || 0);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [userRating]);\r\n\r\n    function clickStar(starIndex: number) {\r\n        const ratingToSet = ratedStar === starIndex ? starIndex - 1 : starIndex;\r\n        setStar(ratingToSet);\r\n        userId && userName && changeRating(props, userId, userName, ratingToSet);\r\n        // TODO use the api to set the rating (add the media type and media id as props)\r\n    }\r\n\r\n    return (\r\n        <Box display='flex'>\r\n            {[...Array(5)].map((star, index) => {\r\n                return (\r\n                    <VerticallyCenteredDiv key={index}>\r\n                        {readonly ?\r\n                            <>\r\n                                {\r\n                                    getIcon(index, readOnlyRating)\r\n                                }\r\n                            </>\r\n                            :\r\n                            <StyledIconButton size={'small'} onClick={() => clickStar(index + 1)}>\r\n                                {index < ratedStar ?\r\n                                    <StarIcon style={{fill: '#FFCC00'}} />\r\n                                    :\r\n                                    <StarBorderIcon style={{fill: '#FFCC00'}} />\r\n                                }\r\n                            </StyledIconButton>\r\n                        }\r\n                    </VerticallyCenteredDiv>\r\n                );\r\n            })}\r\n            <Box ml={1}>{readonly && !hideReadOnlyLabel && twoDecimalRatingString}</Box>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default connect(null, { changeRatingAction })(StarRater);\r\n","import React, {useEffect, useMemo, useRef, useState} from 'react';\r\nimport styled from 'styled-components';\r\nimport {Box, Typography} from '@material-ui/core';\r\nimport Button from '../Button';\r\nimport {connect} from 'react-redux';\r\nimport {deleteReviewAction} from '../../actions/reviewRatingActions';\r\nimport CommentEditor, {CommentEditorAction} from '../CommentEditor';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport {hasDivOverflown} from '../../utils/styleHelpers';\r\nimport StarRater from '../StarRater';\r\nimport axios from 'axios';\r\n\r\ninterface CommentBlockProps {\r\n    review: any,\r\n    currentUserId: string,\r\n    isCurrentUserComment?: boolean,\r\n    mediaId?: string,\r\n    mediaType?: string,\r\n    userRating?: number | undefined;\r\n}\r\n\r\nconst Review = styled.div<{ isCurrentUserComment: boolean | undefined }>`\r\n    border-top: ${({ theme }) => `2px solid ${theme.palette.grey[400]}`};\r\n    border: ${({ theme, isCurrentUserComment }) => isCurrentUserComment && `2px solid ${theme.palette.grey[400]}`};\r\n    min-height: 50px;\r\n    padding: 5px;\r\n    padding-bottom: 0px;\r\n`;\r\n\r\nconst TopBar = styled.div`\r\n    display: flex;\r\n    justify-content: space-between;\r\n`;\r\n\r\nconst ExpandableDiv = styled.div<{ expanded: boolean }>`\r\n    max-height: ${(props) => props.expanded ? '' : '200px'};\r\n    overflow: ${(props) => props.expanded ? 'visible' : 'hidden'};\r\n    position: relative;\r\n`;\r\n\r\nconst ShowMoreButton = styled.button`\r\n    border: none;\r\n    box-shadow: 0px 0 5px rgba(0, 0, 0, 0.3);\r\n    outline: none;\r\n    background-color: rgba(255, 255, 255, 0.75);\r\n    text-align: center;\r\n    height: 30px;\r\n    cursor: pointer;\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 0;\r\n    padding: 0px;\r\n    width: 100%;\r\n    backdrop-filter: blur(1.5px);\r\n`;\r\n\r\nconst ShowLessButton = styled.button`\r\n    border: none;\r\n    outline: none;\r\n    background-color: rgba(255, 255, 255, 0.90);\r\n    text-align: center;\r\n    height: 30px;\r\n    cursor: pointer;\r\n    padding: 0px;\r\n    width: 100%;\r\n    &:hover {\r\n        background-color: ${({ theme }) => theme.palette.grey[200]};\r\n    }\r\n    margin-bottom: 5px;\r\n`;\r\n\r\nconst VerticallyCenteredDiv = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: 10px;\r\n`;\r\n\r\nconst host = window.location.protocol + '//'+ window.location.host;\r\n\r\nfunction deleteReview(props: any) {\r\n    const userId = props.review.userId;\r\n    const reviewUserName = props.review.userName;\r\n    props.deleteReviewAction(userId);\r\n    if (props.userRating) { // if a rating exists, don't delete from db\r\n        axios.put(host + '/reviewRatings/review',\r\n            {\r\n                mediaId: props.mediaId,\r\n                mediaType: props.mediaType,\r\n                userName: reviewUserName,\r\n                userId: userId,\r\n                datePosted: '',\r\n                text: ''\r\n            })\r\n            .then((res: any) => {\r\n                console.log(res);\r\n            })\r\n            .catch((err: any) => {\r\n                console.log(err);\r\n            });\r\n    } else { // if no rating, then delete whole reviewRating document from db\r\n        axios.delete(host + `/reviewRatings`\r\n        + `/${props.mediaType}/${props.mediaId}/${props.review.userId}`)\r\n            .then((res: any) => {\r\n                console.log('successfully deleted the reviewRating', res);\r\n            })\r\n            .catch((err: any) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n}\r\n\r\nconst CommentBlock: React.FC<CommentBlockProps> = (props: CommentBlockProps) => {\r\n    const [isEdit, setIsEdit] = useState(false);\r\n    const [expanded, setExpanded] = useState(false);\r\n    const [hasOverflow, setHasOverflow] = useState(false);\r\n    const expandableRef = useRef(null);\r\n    const { review, currentUserId, isCurrentUserComment } = props;\r\n    const date = new Date(review.datePosted).toDateString();\r\n\r\n    const isAuthor = useMemo(() => {\r\n        return currentUserId === review.userId;\r\n    }, [review, currentUserId]);\r\n\r\n    useEffect(() => {\r\n        const isOverflowing = hasDivOverflown(expandableRef);\r\n        if (isOverflowing) {\r\n            setHasOverflow(true);\r\n        } else {\r\n            setHasOverflow(false);\r\n        }\r\n    }, [review]);\r\n    // TODO only show the edit and delete buttons if the userId matches with the current user's id\r\n    return (\r\n        <>\r\n            <Review isCurrentUserComment={isCurrentUserComment}>\r\n            {isEdit ?\r\n                <>\r\n                    <Typography variant={'h5'}><strong>{review.userName}</strong></Typography>\r\n                    <CommentEditor\r\n                        actionType={CommentEditorAction.Edit}\r\n                        closeEdit={() => setIsEdit(false)}\r\n                        editCommentProps={props}\r\n                    />\r\n                </>\r\n                :\r\n                <ExpandableDiv expanded={expanded} ref={expandableRef}>\r\n                    <TopBar>\r\n                        <Typography variant={'h5'}>\r\n                            <strong>\r\n                                {review.userName}\r\n                            </strong>\r\n                            {` on ${date}`}\r\n                        </Typography>\r\n                        {isAuthor &&\r\n                            <div>\r\n                                <Button onClick={() => setIsEdit(true)}>Edit</Button>\r\n                                <Button onClick={() => deleteReview(props)}>Delete</Button>\r\n                            </div>\r\n                        }\r\n                    </TopBar>\r\n                    <VerticallyCenteredDiv>\r\n                        <Box mr={1}>User rated: </Box>\r\n                        {review.rating ?\r\n                            <StarRater readonly readOnlyRating={review.rating} hideReadOnlyLabel />\r\n                            : 'no rating'\r\n                        }\r\n                    </VerticallyCenteredDiv>\r\n                    <ReactMarkdown source={review.text} />\r\n                    {!expanded && hasOverflow &&\r\n                        <ShowMoreButton onClick={() => setExpanded(true)}>\r\n                            <Typography variant={'body1'}>Show more...</Typography>\r\n                        </ShowMoreButton>\r\n                    }\r\n                    {expanded &&\r\n                        <ShowLessButton onClick={() => setExpanded(false)}>\r\n                            <Typography variant={'body1'}>Show less</Typography>\r\n                        </ShowLessButton>\r\n                    }\r\n                </ExpandableDiv>}\r\n            </Review>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default connect(null, { deleteReviewAction })(CommentBlock);\r\n","export function hasDivOverflown(ref: { current: any; }): boolean {\r\n    const element = ref.current;\r\n    return element.scrollHeight > element.clientHeight || element.scrollWidth > element.clientWidth;\r\n}\r\n","import React, {useEffect, useState} from 'react';\r\nimport CommentBlock from '../CommentBlock';\r\nimport {Typography} from '@material-ui/core';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport CommentEditor, {CommentEditorAction} from '../CommentEditor';\r\nimport Button from '../Button';\r\nimport { MediaType } from '../../constants/dataTypes';\r\nimport {connect} from 'react-redux';\r\n\r\ninterface ReviewListProps {\r\n    mediaId: string,\r\n    mediaType: MediaType,\r\n    otherUserReviews: any[],\r\n    currentUserReview?: any,\r\n    userId: string,\r\n    userName: string,\r\n    userRating?: number | undefined\r\n}\r\n\r\nconst ReviewList: React.FC<ReviewListProps> = (props: ReviewListProps) => {\r\n    const [addCommentEditorOpen, setAddCommentEditor] = useState(false);\r\n    const { otherUserReviews, currentUserReview, mediaId, mediaType, userId, userName, userRating } = props;\r\n\r\n    let hasAddedReview = !!currentUserReview;\r\n\r\n    const initialStateReviews = otherUserReviews?.slice(0,9);\r\n    const [stateReviews, setStateReviews] = useState(initialStateReviews);\r\n\r\n    useEffect(() => {\r\n        const rerenderReviews = otherUserReviews?.slice(0,9);\r\n        setStateReviews(rerenderReviews);\r\n    }, [otherUserReviews]);\r\n\r\n    const fetchMoreData = () => {\r\n        setTimeout(() => {\r\n            const currentReviewLength = stateReviews.length;\r\n            const theFetchNum = currentReviewLength + 5;\r\n            const fetchedReviews = otherUserReviews.slice(0, theFetchNum);\r\n            setStateReviews(fetchedReviews);\r\n        }, 1000);\r\n    };\r\n\r\n    const totalReviews = hasAddedReview ? otherUserReviews.length + 1 : otherUserReviews.length;\r\n\r\n    return (\r\n        <>\r\n            <Typography variant={'h3'} gutterBottom>\r\n                {totalReviews || 0} Total Reviews\r\n            </Typography>\r\n            {addCommentEditorOpen ?\r\n                <>\r\n                    <Typography variant={'h5'}><strong>{userName}</strong></Typography>\r\n                    <CommentEditor\r\n                        actionType={CommentEditorAction.Add}\r\n                        closeEdit={() => setAddCommentEditor(false)}\r\n                        addCommentProps={{\r\n                            mediaType: mediaType,\r\n                            mediaId: mediaId,\r\n                            userId: userId,\r\n                            userName: userName,\r\n                            userRating: userRating\r\n                        }}\r\n                    />\r\n                </> :\r\n                <div style={{textAlign: 'right'}}>\r\n                    {!hasAddedReview &&\r\n                        <Button onClick={() => setAddCommentEditor(true)}>\r\n                            Add Review\r\n                        </Button>\r\n                    }\r\n                </div>\r\n            }\r\n            {currentUserReview && currentUserReview.text &&\r\n                <>\r\n                    <CommentBlock\r\n                        review={currentUserReview}\r\n                        currentUserId={userId}\r\n                        isCurrentUserComment={true}\r\n                        mediaId={mediaId}\r\n                        mediaType={mediaType}\r\n                        userRating={userRating}\r\n                    />\r\n                </>\r\n            }\r\n            <br/>\r\n            {otherUserReviews ? <InfiniteScroll\r\n                dataLength={stateReviews.length}\r\n                next={fetchMoreData}\r\n                hasMore={stateReviews.length < otherUserReviews.length}\r\n                loader={<h4 style={{textAlign: 'center'}}>Loading more reviews...</h4>}\r\n                endMessage={\r\n                    <p style={{textAlign: 'center'}}>\r\n                        <b>No more reviews</b>\r\n                    </p>\r\n                }>\r\n                {stateReviews.map((r, index) =>\r\n                    <CommentBlock\r\n                        key={index}\r\n                        review={r}\r\n                        currentUserId={userId}\r\n                    />)\r\n                }\r\n            </InfiniteScroll> : null}\r\n        </>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state: any, ownProps: any) => {\r\n    const reviews = state.reviewRatings.filter((r: any) => r.text);\r\n    let otherUserReviews: any[] = [];\r\n    let currentUserReview: any = undefined;\r\n    reviews.forEach((r: any) => {\r\n        r.userId === ownProps.userId ? currentUserReview = r : otherUserReviews.push(r);\r\n    });\r\n    return {\r\n        otherUserReviews: otherUserReviews,\r\n        currentUserReview: currentUserReview\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps)(ReviewList);\r\n","import React, {useEffect, useState} from 'react';\r\nimport Container from '../Container';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ReviewList from '../../components/ReviewList';\r\nimport { MediaType } from '../../constants/dataTypes';\r\nimport MockCover from '../../assets/MockCover.png';\r\nimport styled from 'styled-components';\r\nimport {Box, Grid} from '@material-ui/core';\r\nimport TagsSection from '../../components/TagsSection';\r\nimport StarRater from '../../components/StarRater';\r\nimport axios from 'axios';\r\nimport {connect} from 'react-redux';\r\nimport {loadAllReviewsAction} from '../../actions/reviewRatingActions';\r\nimport { FormControl, MenuItem, InputLabel, Select } from '@material-ui/core';\r\n\r\nconst StyledImage = styled.img`\r\n    width: 100%;\r\n    max-width: 300px;\r\n    margin-bottom: 15px;\r\n`;\r\n\r\nconst StyledGridItem = styled(Grid)`\r\n    text-align: center;\r\n`;\r\n\r\nconst VerticallyCenteredDiv = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: 10px;\r\n`;\r\n\r\nconst CenteredDiv = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    margin-bottom: 10px;\r\n`;\r\n\r\nconst AddToUserButton = styled.button<{ isAddedToUser: boolean }>`\r\n    background-color: ${({ theme, isAddedToUser }) => isAddedToUser ? theme.palette.grey[300] : theme.palette.primary.light};\r\n    border: none;\r\n    outline: none;\r\n    font-size: 16px;\r\n    border-radius: 5px;\r\n    padding: 5px;\r\n    cursor: pointer;\r\n    margin: 5px;\r\n    color: ${({ isAddedToUser }) => isAddedToUser ? 'black' : 'white'};\r\n`;\r\n\r\nconst StyledFormControl = styled(FormControl)`\r\n    width: 100%;\r\n    margin: 5px !important;\r\n`;\r\n\r\nconst MediaPage: React.FC<{}> = (props: any) => {\r\n    const [mediaType, id] = props.location.pathname.split('/').filter((o: string) => o);\r\n    const [isForLater, setForLater] = useState(false);\r\n    const [isFavorite, setFavorite] = useState(false);\r\n    const [watchedOrRead, setWatchedOrRead] = useState(false);\r\n    const [mediaObject, setMediaObject] = useState({\r\n        title: '',\r\n        id: id,\r\n        mediaType: MediaType.movie,\r\n        image: '',\r\n        people: '',\r\n        genres: [''],\r\n        blurb: '',\r\n        avgRating: 0,\r\n        userRating: 0,\r\n        userHasReviewText: false\r\n    });\r\n    const [userLists, setUserLists] = useState({\r\n        booksRead: [],\r\n        moviesWatched: [],\r\n        watchLater: [],\r\n        readLater: [],\r\n        favoriteMovies: [],\r\n        favoriteBooks: [],\r\n        favoriteAuthors: [],\r\n        favoriteDirectors: []\r\n    });\r\n\r\n    const [storyTags, setStoryTags] = useState([]);\r\n    const [unaddedStoryTags, setUnaddedStoryTags] = useState<Array<{ tagId: string, tagName: string }>>([]);\r\n    const [addedStoryTags, setAddedStoryTags] = useState<Array<{ tagId: string, tagName: string }>>([]);\r\n\r\n    const sessionDataString = sessionStorage.getItem('NS-session-data');\r\n    const sessionDataObj = sessionDataString && JSON.parse(sessionDataString);\r\n    const userName = sessionDataObj.username;\r\n    const userId = sessionDataObj.userId;\r\n\r\n    const {\r\n        title,\r\n        image,\r\n        people,\r\n        blurb,\r\n        genres,\r\n        avgRating,\r\n        userRating,\r\n        userHasReviewText\r\n    } = mediaObject;\r\n\r\n    const host = window.location.protocol + '//'+ window.location.host;\r\n\r\n    useEffect(() => {\r\n        const mediaRouteType = mediaType === MediaType.book ? 'books' : 'movies';\r\n        axios.get(host + `/${mediaRouteType}/${id}`)\r\n            .then((mediaRes: any) => {\r\n                axios.get(host + `/reviewRatings/${mediaType}/${id}`)\r\n                    .then((reviewRatingRes: any) => {\r\n                        const reviews = reviewRatingRes.data.reviewArray;\r\n                        props.loadAllReviewsAction(reviews);\r\n                        const userRatingReviewArr = reviews.filter((r: any) => r.userId === userId);\r\n                        const userRating = userRatingReviewArr.length > 0 ? userRatingReviewArr[0].rating : undefined;\r\n                        const userHasReviewText = userRatingReviewArr.length > 0 && !!userRatingReviewArr[0].text;\r\n                        setMediaObject({\r\n                            title: 'Mock Title Harry Potter',\r\n                            id: 'movie-001',\r\n                            mediaType: MediaType.movie,\r\n                            image: MockCover,\r\n                            people: 'J.K. Rowling',\r\n                            genres: ['fantasy', 'action', 'sci-fi', 'superheroes', 'tag1', 'tag2', 'tag3'],\r\n                            blurb: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.',\r\n                            avgRating: reviewRatingRes.data.average,\r\n                            userRating: userRating,\r\n                            userHasReviewText: userHasReviewText\r\n                        });\r\n                        setStoryTags(mediaRes.data.nextStoryTags);\r\n                    })\r\n                    .catch((error: any) => {\r\n                        console.log('Error getting reviews', error);\r\n                    });\r\n            })\r\n            .catch((error: any) => {\r\n                console.log('Error getting media', error);\r\n            });\r\n        // TODO get the media info from an api call using the media id\r\n    }, [props, id, mediaType, userId]);\r\n\r\n    useEffect(() => {\r\n        axios.get(host + `/users/userLists/${userId}`)\r\n            .then((response: any) => {\r\n                const userLists = response.data;\r\n                if (mediaType === MediaType.movie) {\r\n                    if (userLists.watchLater.includes(id)) {\r\n                        setForLater(true);\r\n                    }\r\n                    if (userLists.favoriteMovies.includes(id)) {\r\n                        setFavorite(true);\r\n                    }\r\n                    if (userLists.moviesWatched.includes(id)) {\r\n                        setWatchedOrRead(true);\r\n                    }\r\n                } else {\r\n                    if (userLists.readLater.includes(id)) {\r\n                        setForLater(true);\r\n                    }\r\n                    if (userLists.favoriteBooks.includes(id)) {\r\n                        setFavorite(true);\r\n                    }\r\n                    if (userLists.booksRead.includes(id)) {\r\n                        setWatchedOrRead(true);\r\n                    }\r\n                }\r\n                setUserLists({\r\n                    booksRead: userLists.booksRead,\r\n                    moviesWatched: userLists.moviesWatched,\r\n                    watchLater: userLists.watchLater,\r\n                    readLater: userLists.readLater,\r\n                    favoriteMovies: userLists.favoriteMovies,\r\n                    favoriteBooks: userLists.favoriteBooks,\r\n                    favoriteAuthors: userLists.favoriteAuthors,\r\n                    favoriteDirectors: userLists.favoriteDirectors\r\n                });\r\n            })\r\n            .catch((error: any) => {\r\n                console.log('Error getting media', error);\r\n            });\r\n    }, [userId, mediaType, id]);\r\n\r\n    useEffect(() => {\r\n        axios.get('/nextStoryTags')\r\n            .then((res: any) => {\r\n                const tagData = res.data;\r\n                const sortedTags = tagData.sort(function(a: any, b: any) {\r\n                    if(a.tagName < b.tagName) { return -1; }\r\n                    if(a.tagName > b.tagName) { return 1; }\r\n                    return 0;\r\n                });\r\n                const storyTagNames = storyTags.map((t: any) => t.tagName);\r\n                const unAdded: Array<{ tagId: string, tagName: string }> = [];\r\n                const added: Array<{ tagId: string, tagName: string }> = [];\r\n                sortedTags.forEach((t: any) => {\r\n                    if (storyTagNames.includes(t.tagName)) {\r\n                        added.push(t);\r\n                    } else unAdded.push(t);\r\n                });\r\n                setUnaddedStoryTags(unAdded);\r\n                setAddedStoryTags(added);\r\n            })\r\n            .catch((error: any) => {\r\n                console.log('Error getting all story tags', error);\r\n            });\r\n    }, [storyTags]);\r\n\r\n    const updateMediaInDB = (tagsArray: any[]) => {\r\n        const mediaRouteType = mediaType === MediaType.book ? 'books' : 'movies';\r\n        axios.put(`/${mediaRouteType}/updateNextStoryTags/${id}`,\r\n            { tagsArray: tagsArray })\r\n            .then((res: any) => {\r\n                console.log('updated tags for media', res.data);\r\n            }).catch((err: any) => {\r\n                console.log('error setting tags for media', err);\r\n            });\r\n    };\r\n\r\n    const addOrRemoveCall = (key: string, mediaId: string, action:string) => {\r\n        axios.put(host + `/users/${key}/${mediaId}/${userId}`, {\r\n            action:action\r\n        }).then((response: any) => {\r\n            console.log(response);\r\n        })\r\n            .catch((error: any) => {\r\n                console.log('Error getting reviews', error);\r\n            });\r\n    };\r\n\r\n    const addOrRemoveWatchOrRead = (mediaId: string) => {\r\n        const key = mediaType === MediaType.movie ? 'moviesWatched' : 'booksRead';\r\n        if (watchedOrRead) {\r\n            setWatchedOrRead(false);\r\n            addOrRemoveCall(key, mediaId, 'REMOVE');\r\n        } else {\r\n            setWatchedOrRead(true);\r\n            addOrRemoveCall(key, mediaId, 'ADD');\r\n        }\r\n    };\r\n\r\n    const addOrRemoveWatchReadLater = (mediaId: string) => {\r\n        console.log('watch or read later, mediaType: ', mediaType, 'id: ', mediaId);\r\n        const key = mediaType === MediaType.movie ? 'watchLater' : 'readLater';\r\n        if (isForLater) {\r\n            setForLater(false);\r\n            addOrRemoveCall(key, mediaId, 'REMOVE');\r\n        } else {\r\n            setForLater(true);\r\n            addOrRemoveCall(key, mediaId, 'ADD');\r\n        }\r\n    };\r\n\r\n    const addOrRemoveFavorites = (mediaId: string) => {\r\n        const key = mediaType === MediaType.movie ? 'favoriteMovies' : 'favoriteBooks';\r\n        if (isFavorite) {\r\n            setFavorite(false);\r\n            addOrRemoveCall(key, mediaId, 'REMOVE');\r\n        } else {\r\n            setFavorite(true);\r\n            addOrRemoveCall(key, mediaId, 'ADD');\r\n        }\r\n    };\r\n\r\n    const handleAddTag = (event: any) => {\r\n        console.log(event.target.value);\r\n        const newAddedTags = [...addedStoryTags, event.target.value];\r\n        setAddedStoryTags(newAddedTags);\r\n        updateMediaInDB(newAddedTags);\r\n    };\r\n\r\n    const handleDeleteTag = (event: any) => {\r\n        console.log(event.target.value);\r\n        const filteredStoryTags = addedStoryTags.filter((t: any) => t.tagId !== event.target.value.tagId);\r\n        setAddedStoryTags(filteredStoryTags);\r\n        updateMediaInDB(filteredStoryTags);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Container maxWidth='lg'>\r\n                <Grid container direction={'row'}  spacing={5}>\r\n                    <StyledGridItem item sm={3}>\r\n                        <StyledImage src={image} />\r\n                        <div>\r\n                            Your rating:\r\n                            <CenteredDiv>\r\n                                <StarRater\r\n                                    userRating={userRating}\r\n                                    readonly={false}\r\n                                    userId={userId}\r\n                                    userName={userName}\r\n                                    userHasReviewText={userHasReviewText}\r\n                                    mediaId={id}\r\n                                    mediaType={mediaType}\r\n                                />\r\n                            </CenteredDiv>\r\n                            <div>\r\n                                <AddToUserButton\r\n                                    onClick={() => addOrRemoveWatchOrRead(id)}\r\n                                    isAddedToUser={watchedOrRead}\r\n                                >\r\n                                    {`${watchedOrRead ? 'Remove from' : 'Add to'} ${mediaType === MediaType.movie ? 'watched' : 'read'}`}\r\n                                </AddToUserButton>\r\n                            </div>\r\n                            <div>\r\n                                <AddToUserButton\r\n                                    onClick={() => addOrRemoveWatchReadLater(id)}\r\n                                    isAddedToUser={isForLater}\r\n                                >\r\n                                    {`${isForLater ? 'Remove from' : 'Add to'} ${mediaType === MediaType.movie ? 'watch' : 'read'} later`}\r\n                                </AddToUserButton>\r\n                            </div>\r\n                            <div>\r\n                                <AddToUserButton\r\n                                    onClick={() => addOrRemoveFavorites(id)}\r\n                                    isAddedToUser={isFavorite}\r\n                                >\r\n                                    {isFavorite ? 'Remove favorite' : 'Add favorite'}\r\n                                </AddToUserButton>\r\n                            </div>\r\n                        </div>\r\n                    </StyledGridItem>\r\n                    <Grid item sm={6}>\r\n                        <Typography variant='h1'>{title}</Typography>\r\n                        <Box fontStyle='italic'>\r\n                            <Typography variant='subtitle1' gutterBottom>\r\n                                {people}\r\n                            </Typography>\r\n                        </Box>\r\n                        <VerticallyCenteredDiv>\r\n                            <Typography variant='subtitle2' >Avg rating: </Typography>\r\n                            <StarRater readOnlyRating={avgRating} readonly />\r\n                        </VerticallyCenteredDiv>\r\n                        <Typography variant='body1'>{blurb}</Typography>\r\n                    </Grid>\r\n                    <Grid item sm={3}>\r\n                        Genres:\r\n                        <TagsSection tags={genres}/>\r\n                        Tags:\r\n                        <TagsSection tagObjects={addedStoryTags}/>\r\n                        <StyledFormControl variant='outlined'>\r\n                            <InputLabel id='demo-simple-select-outlined-label'>Add a tag</InputLabel>\r\n                            <Select\r\n                                labelId='add-tag-label'\r\n                                id='add-tag'\r\n                                value={''}\r\n                                onChange={handleAddTag}\r\n                                label='Add a tag'\r\n                            >\r\n                                {unaddedStoryTags.map((t: any, index) => {\r\n                                    return <MenuItem key={`${index}_add`} value={t}>{t.tagName}</MenuItem>;\r\n                                })}\r\n                            </Select>\r\n                        </StyledFormControl>\r\n                        <StyledFormControl variant='outlined'>\r\n                            <InputLabel id='demo-simple-select-outlined-label'>Delete a tag</InputLabel>\r\n                            <Select\r\n                                labelId='delete-tag-label'\r\n                                id='delete-tag'\r\n                                value={''}\r\n                                onChange={handleDeleteTag}\r\n                                label='Delete a tag'\r\n                            >\r\n                                {addedStoryTags.map((t: any, index) => {\r\n                                    return <MenuItem key={`${index}_delete`} value={t}>{t.tagName}</MenuItem>;\r\n                                })}\r\n                            </Select>\r\n                        </StyledFormControl>\r\n                    </Grid>\r\n                </Grid>\r\n            </Container>\r\n            <Container maxWidth='md'>\r\n                <ReviewList\r\n                    mediaId={id}\r\n                    mediaType={mediaType}\r\n                    userName={userName}\r\n                    userId={userId}\r\n                    userRating={userRating}\r\n                />\r\n            </Container>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default connect(null, { loadAllReviewsAction })(MediaPage);\r\n"],"sourceRoot":""}