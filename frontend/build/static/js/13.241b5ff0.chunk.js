(this["webpackJsonpnext-story"]=this["webpackJsonpnext-story"]||[]).push([[13],{163:function(e,t,a){"use strict";var n,r;a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r})),function(e){e.movie="movie",e.book="book",e.start=""}(n||(n={})),function(e){e.bookPerson="bookPerson",e.moviePerson="moviePerson",e.genre="genre",e.tag="tag",e.searchBar="searchBar"}(r||(r={}))},164:function(e,t,a){"use strict";var n=a(24),r=a(0),c=a.n(r),o=a(251),i=a(19);function l(){var e=Object(n.a)(["\n    margin-top: 85px;\n    margin-bottom: 85px;\n"]);return l=function(){return e},e}var u=Object(i.b)(o.a)(l());t.a=function(e){return c.a.createElement(u,{maxWidth:e.maxWidth},e.children)}},166:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(77),r=function(e){return{type:n.a,filterName:e}}},170:function(e,t,a){"use strict";var n=a(24),r=a(0),c=a.n(r),o=a(19),i=a(8),l=a(163),u=a(41),s=a(75),b=a(166);function g(){var e=Object(n.a)(["\n    border-radius: 7px;\n    color: white;\n    outline: none;\n    border: none;\n    margin: 5px;\n    cursor: pointer;\n    background-color: ",";\n    &:hover {\n        background-color: ",";\n    }\n    font-size: 16px;\n    padding: 3px 5px 3px 5px;\n"]);return g=function(){return e},e}var h=o.b.button(g(),(function(e){return e.theme.palette.primary.light}),(function(e){return e.theme.palette.secondary.light})),f=Object(s.b)(null,{changeSingleSearchPageFilter:b.a})((function(e){var t=e.label,a=e.tagId,n=e.singleQueryType,r=Object(i.g)(),o=encodeURIComponent(a||t);return c.a.createElement(c.a.Fragment,null,t&&c.a.createElement(h,{onClick:function(){!function(e,t){switch(t){case l.b.bookPerson:e.changeSingleSearchPageFilter(u.b);break;case l.b.moviePerson:e.changeSingleSearchPageFilter(u.d);break;case l.b.tag:case l.b.genre:case l.b.searchBar:default:e.changeSingleSearchPageFilter(u.a)}}(e,n),r.push("/searchResult/param?singleQueryType=".concat(n,"&query=").concat(o))}},t))}));function m(){var e=Object(n.a)(["\n    margin-bottom: 15px;\n"]);return m=function(){return e},e}var p=o.b.div(m());t.a=function(e){var t=e.singleQueryType,a=e.tags,n=e.tagObjects;return c.a.createElement(p,null,a&&a.map((function(e,a){return c.a.createElement(f,{key:a,label:e,singleQueryType:t})})),!a&&n&&n.map((function(e,a){return c.a.createElement(f,{key:a,label:e.tagName,singleQueryType:t,tagId:e.tagId})})))}},178:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(41),r=function(e){return{type:n.c,filterName:e}}},195:function(e,t,a){"use strict";var n=a(40),r=a(0),c=a.n(r),o=a(157),i=a(155),l=a(150),u=a(75),s=a(178),b=a(41),g=a(166);t.a=Object(u.b)((function(e){return{singleSearchPageFilter:e.singleSearchPageFilterReducer}}),{changeHomePageFilter:s.a,changeSingleSearchPageFilter:g.a})((function(e){var t=e.singleSearchPageFilter,a=e.isSearchPage,u=c.a.useState("all"),s=Object(n.a)(u,2),g=s[0],h=s[1];return Object(r.useEffect)((function(){a&&t&&h(t)}),[t]),Object(r.useEffect)((function(){switch(g){case"all":a?e.changeSingleSearchPageFilter(b.a):e.changeHomePageFilter(b.a);break;case"movies":a?e.changeSingleSearchPageFilter(b.d):e.changeHomePageFilter(b.d);break;case"books":a?e.changeSingleSearchPageFilter(b.b):e.changeHomePageFilter(b.b)}}),[g]),c.a.createElement(o.a,{smDown:!0},c.a.createElement(i.a,{value:g,onChange:function(e,t){h(t)},"aria-label":"home-page-filter",centered:!0},c.a.createElement(l.a,{component:"a",label:"All",value:"all"}),c.a.createElement(l.a,{component:"a",label:"Movies",value:"movies"}),c.a.createElement(l.a,{component:"a",label:"Books",value:"books"})))}))},196:function(e,t,a){"use strict";var n=a(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),c=(0,n(a(63)).default)(r.default.createElement("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home");t.default=c},197:function(e,t,a){"use strict";var n=a(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),c=(0,n(a(63)).default)(r.default.createElement("path",{d:"M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z"}),"Movie");t.default=c},198:function(e,t,a){"use strict";var n=a(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),c=(0,n(a(63)).default)(r.default.createElement("path",{d:"M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"}),"Book");t.default=c},208:function(e,t,a){"use strict";var n=a(40),r=a(24),c=a(0),o=a.n(c),i=a(19),l=a(1),u=a(2),s=(a(25),a(3),a(4)),b=a(5),g=c.forwardRef((function(e,t){var a=e.children,n=e.classes,r=e.className,o=e.component,i=void 0===o?"div":o,b=e.onChange,g=e.showLabels,h=void 0!==g&&g,f=e.value,m=Object(u.a)(e,["children","classes","className","component","onChange","showLabels","value"]);return c.createElement(i,Object(l.a)({className:Object(s.a)(n.root,r),ref:t},m),c.Children.map(a,(function(e,t){if(!c.isValidElement(e))return null;var a=void 0===e.props.value?t:e.props.value;return c.cloneElement(e,{selected:a===f,showLabel:void 0!==e.props.showLabel?e.props.showLabel:h,value:a,onChange:b})})))})),h=Object(b.a)((function(e){return{root:{display:"flex",justifyContent:"center",height:56,backgroundColor:e.palette.background.paper}}}),{name:"MuiBottomNavigation"})(g),f=a(157),m=a(74),p=c.forwardRef((function(e,t){var a=e.classes,n=e.className,r=e.icon,o=e.label,i=e.onChange,b=e.onClick,g=e.selected,h=e.showLabel,f=e.value,p=Object(u.a)(e,["classes","className","icon","label","onChange","onClick","selected","showLabel","value"]);return c.createElement(m.a,Object(l.a)({ref:t,className:Object(s.a)(a.root,n,g?a.selected:!h&&a.iconOnly),focusRipple:!0,onClick:function(e){i&&i(e,f),b&&b(e)}},p),c.createElement("span",{className:a.wrapper},r,c.createElement("span",{className:Object(s.a)(a.label,g?a.selected:!h&&a.iconOnly)},o)))})),d=Object(b.a)((function(e){return{root:{transition:e.transitions.create(["color","padding-top"],{duration:e.transitions.duration.short}),padding:"6px 12px 8px",minWidth:80,maxWidth:168,color:e.palette.text.secondary,flex:"1","&$iconOnly":{paddingTop:16},"&$selected":{paddingTop:6,color:e.palette.primary.main}},selected:{},iconOnly:{},wrapper:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"100%",flexDirection:"column"},label:{fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s","&$iconOnly":{opacity:0,transitionDelay:"0s"},"&$selected":{fontSize:e.typography.pxToRem(14)}}}}),{name:"MuiBottomNavigationAction"})(p),v=a(196),y=a.n(v),O=a(197),j=a.n(O),x=a(198),E=a.n(x),S=a(75),k=a(178),P=a(166),w=a(41);function F(){var e=Object(r.a)(["\n    width: 100%;\n    position: fixed;\n    bottom: 0;\n"]);return F=function(){return e},e}var T=Object(i.b)(h)(F());t.a=Object(S.b)((function(e){return{singleSearchPageFilter:e.singleSearchPageFilterReducer}}),{changeHomePageFilter:k.a,changeSingleSearchPageFilter:P.a})((function(e){var t=e.singleSearchPageFilter,a=e.isSearchPage,r=Object(c.useState)(w.a),i=Object(n.a)(r,2),l=i[0],u=i[1];return Object(c.useEffect)((function(){a&&t&&u(t)}),[t]),Object(c.useEffect)((function(){switch(l){case"all":a?e.changeSingleSearchPageFilter(w.a):e.changeHomePageFilter(w.a);break;case"movies":a?e.changeSingleSearchPageFilter(w.d):e.changeHomePageFilter(w.d);break;case"books":a?e.changeSingleSearchPageFilter(w.b):e.changeHomePageFilter(w.b)}}),[l]),o.a.createElement(f.a,{mdUp:!0},o.a.createElement(T,{value:l,onChange:function(e,t){u(t)},showLabels:!0,"aria-label":"home-page-filter"},o.a.createElement(d,{label:"All",icon:o.a.createElement(y.a,null),value:"all"}),o.a.createElement(d,{label:"Movies",icon:o.a.createElement(j.a,null),value:"movies"}),o.a.createElement(d,{label:"Books",icon:o.a.createElement(E.a,null),value:"books"})))}))},209:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(187),o=a(24),i=a(19),l=a(227),u=a(149),s=a(281),b=a(163),g=a(170),h=a(8),f=a(177);function m(){var e=Object(o.a)(["\n    &:hover {\n        cursor: pointer;\n    }\n"]);return m=function(){return e},e}function p(){var e=Object(o.a)(["\n    margin-bottom: 5px;\n"]);return p=function(){return e},e}function d(){var e=Object(o.a)(["\n    max-width: ",";\n    &:hover {\n        cursor: pointer;\n    }\n"]);return d=function(){return e},e}function v(){var e=Object(o.a)(["\n    display: flex;\n    justify-content: space-between;\n"]);return v=function(){return e},e}function y(){var e=Object(o.a)(["\n    border-top: ",";\n    border-bottom: ",";\n    min-height: 50px;\n    padding: 5px;\n    margin-bottom: 2px;\n"]);return y=function(){return e},e}var O=i.b.div(y(),(function(e){var t=e.theme;return"2px solid ".concat(t.palette.grey[400])}),(function(e){var t=e.theme;return"2px solid ".concat(t.palette.grey[400])})),j=i.b.div(v()),x=i.b.img(d(),(function(e){return e.isSmall?"150px":"100%"})),E=i.b.div(p()),S=Object(i.b)(l.a)(m()),k=function(e){var t=e.image,a=e.title,n=e.blurb,c=e.genres,o=e.mediaType,i=e.mediaId,l=e.nextStoryTags,m=Object(h.g)(),p=Object(u.a)("(max-width:450px)"),d=function(){m.push("/".concat(o,"/").concat(i))};return r.a.createElement(O,null,r.a.createElement(j,null,r.a.createElement(s.a,{container:!0,direction:"row",spacing:5},r.a.createElement(s.a,{item:!0,sm:3},r.a.createElement(x,{src:t,onClick:d,isSmall:p})),r.a.createElement(s.a,{item:!0,sm:6},r.a.createElement(E,null,r.a.createElement(S,{variant:"h5",onClick:d,color:"textPrimary",gutterBottom:!0},r.a.createElement("strong",null,a))),r.a.createElement(f.a,{content:n})),r.a.createElement(s.a,{item:!0,sm:3},"Genres:",r.a.createElement(g.a,{tags:c,singleQueryType:b.b.genre}),l&&r.a.createElement(r.a.Fragment,null,"Tags:",r.a.createElement(g.a,{tagObjects:l,singleQueryType:b.b.tag}))))))};t.a=function(e){var t=e.resultsToDisplay,a=e.hasMore,n=e.doNext;return r.a.createElement(c.a,{style:{overflow:"hidden"},dataLength:t.length,scrollThreshold:1,next:n,hasMore:a,loader:r.a.createElement("h4",{style:{textAlign:"center"}},"Loading more results..."),endMessage:r.a.createElement("p",{style:{textAlign:"center"}},r.a.createElement("b",null,"No more results"))},t.map((function(e,t){return r.a.createElement(k,{key:t,image:e.image,title:e.title,blurb:e.blurb,genres:e.genres,nextStoryTags:e.nextStoryTags,mediaType:e.mediaType,mediaId:e.id})})))}},383:function(e,t,a){"use strict";a.r(t);var n=a(64),r=a(179),c=a.n(r),o=a(180),i=a(40),l=a(0),u=a.n(l),s=a(164),b=a(280),g=a(162),h=a.n(g),f=a(163),m=a(209),p=a(195),d=a(208),v=a(75),y=a(41),O=a(166);t.default=Object(v.b)((function(e){return{singleSearchPageFilter:e.singleSearchPageFilterReducer}}),{changeSingleSearchPageFilter:O.a})((function(e){var t=decodeURI(e.location.search),a=e.singleSearchPageFilter,r=function(e){var t=e.substr(1).split("&"),a=Object(i.a)(t,2),n=a[0],r=a[1];return[n.split("=")[1],r.split("=")[1]]}(t),g=Object(i.a)(r,2),v=g[0],O=g[1],j=Object(l.useState)(0),x=Object(i.a)(j,2),E=x[0],S=x[1],k=Object(l.useState)([]),P=Object(i.a)(k,2),w=P[0],F=P[1],T=Object(l.useState)([]),M=Object(i.a)(T,2),C=M[0],B=M[1],N=Object(l.useState)([]),I=Object(i.a)(N,2),L=I[0],H=I[1],R=Object(l.useState)(a),A=Object(i.a)(R,2),Q=A[0],z=A[1],D=Object(l.useState)(!0),_=Object(i.a)(D,2),W=_[0],V=_[1],$=Object(l.useState)(!0),U=Object(i.a)($,2),J=U[0],Y=U[1];function q(){return(q=Object(o.a)(c.a.mark((function e(){var t,a,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a=[],e.prev=2,e.next=5,h.a.get("/movies/withTag/".concat(O));case 5:n=e.sent,t=n.data,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:return e.prev=11,e.next=14,h.a.get("/books/withTag/".concat(O));case 14:r=e.sent,a=r.data,e.next=20;break;case 18:e.prev=18,e.t1=e.catch(11);case 20:return e.abrupt("return",[t,a]);case 21:case"end":return e.stop()}}),e,null,[[2,9],[11,18]])})))).apply(this,arguments)}function G(){return(G=Object(o.a)(c.a.mark((function e(t,a){var r,o,i,l,u,s,b,g,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],o=[],i=E+5,l=t.length>=i?i:t.length,u=a.length>=i?i:a.length,s=c.a.mark((function e(a){var r,i,l,u,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t[a].movieId,e.prev=1,e.next=4,h.a.get("/thirdPartyMovieApi/tmdbMovies/searchOneById/".concat(r));case 4:i=e.sent,l=i.data,u=t.filter((function(e){return e.movieId===r})),s=u.length>0&&u[0],l.nextStoryTags=s?s.nextStoryTags:[],o.push(l),H((function(e){return[].concat(Object(n.a)(e),[l])})),F((function(e){return[].concat(Object(n.a)(e),[l])})),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(1);case 16:case"end":return e.stop()}}),e,null,[[1,14]])})),b=E;case 7:if(!(b<l)){e.next=12;break}return e.delegateYield(s(b),"t0",9);case 9:b++,e.next=7;break;case 12:g=c.a.mark((function e(t){var o,i,l,u,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a[t].bookId,e.prev=1,e.next=4,h.a.get("/thirdPartyBookApi/googleBooks/searchOneById/".concat(o));case 4:i=e.sent,l=i.data,u=a.filter((function(e){return e.bookId===o})),s=u.length>0&&u[0],l.nextStoryTags=s?s.nextStoryTags:[],r.push(l),H((function(e){return[].concat(Object(n.a)(e),[l])})),B((function(e){return[].concat(Object(n.a)(e),[l])})),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(1);case 16:case"end":return e.stop()}}),e,null,[[1,14]])})),f=E;case 14:if(!(f<u)){e.next=19;break}return e.delegateYield(g(f),"t1",16);case 16:f++,e.next=14;break;case 19:return 0===o.length&&V(!1),0===r.length&&Y(!1),e.abrupt("return",[o,r]);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(o.a)(c.a.mark((function e(){var t,a,r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a=[],e.prev=2,e.next=5,h.a.get("/thirdPartyMovieApi/tmdbMovies/singleQuery/".concat(v,"/").concat(O,"/").concat(E,"/").concat(5));case 5:r=e.sent,0===(t=r.data).length?V(!1):(F((function(e){return[].concat(Object(n.a)(e),Object(n.a)(t))})),H((function(e){return[].concat(Object(n.a)(e),Object(n.a)(t))}))),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:return e.prev=12,e.next=15,h.a.get("/thirdPartyBookApi/googleBooks/singleQuery/".concat(v,"/").concat(O,"/").concat(E,"/").concat(5));case 15:o=e.sent,0===(a=o.data).length?Y(!1):(B((function(e){return[].concat(Object(n.a)(e),Object(n.a)(a))})),H((function(e){return[].concat(Object(n.a)(e),Object(n.a)(a))}))),e.next=22;break;case 20:e.prev=20,e.t1=e.catch(12);case 22:return e.abrupt("return",[t,a]);case 23:case"end":return e.stop()}}),e,null,[[2,10],[12,20]])})))).apply(this,arguments)}Object(l.useEffect)((function(){z(a)}),[a]),Object(l.useEffect)((function(){switch(v){case f.b.tag:(function(){return q.apply(this,arguments)})().then((function(e){var t=Object(i.a)(e,2);(function(e,t){return G.apply(this,arguments)})(t[0],t[1]).then((function(e){})).catch((function(e){}))})).catch((function(e){}));break;case f.b.searchBar:case f.b.genre:case f.b.moviePerson:case f.b.bookPerson:(function(){return K.apply(this,arguments)})().then((function(e){})).catch((function(e){}))}}),[v,O,E]);var X=Object(l.useMemo)((function(){switch(Q){case y.d:return w;case y.b:return C;case y.a:default:return L}}),[Q,w,C,L]),Z=Object(l.useMemo)((function(){switch(Q){case y.d:return W;case y.b:return J;case y.a:default:return W||J}}),[Q,J,W]);return u.a.createElement(s.a,{maxWidth:"md"},u.a.createElement(b.a,{variant:"h1"},"Search Results"),u.a.createElement("br",null),u.a.createElement(p.a,{isSearchPage:!0}),u.a.createElement("br",null),u.a.createElement(m.a,{resultsToDisplay:X,hasMore:Z,doNext:function(){S(E+5)}}),u.a.createElement("br",null),u.a.createElement(d.a,{isSearchPage:!0}))}))}}]);
//# sourceMappingURL=13.241b5ff0.chunk.js.map