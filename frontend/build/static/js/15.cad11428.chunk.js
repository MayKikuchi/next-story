(this["webpackJsonpnext-story"]=this["webpackJsonpnext-story"]||[]).push([[15],{163:function(e,t,n){"use strict";var a,r;n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),function(e){e.movie="movie",e.book="book",e.start=""}(a||(a={})),function(e){e.bookPerson="bookPerson",e.moviePerson="moviePerson",e.genre="genre",e.tag="tag",e.searchBar="searchBar"}(r||(r={}))},164:function(e,t,n){"use strict";var a=n(24),r=n(0),i=n.n(r),o=n(251),c=n(19);function u(){var e=Object(a.a)(["\n    margin-top: 85px;\n    margin-bottom: 85px;\n"]);return u=function(){return e},e}var l=Object(c.b)(o.a)(u());t.a=function(e){return i.a.createElement(l,{maxWidth:e.maxWidth},e.children)}},166:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(77),r=function(e){return{type:a.a,filterName:e}}},170:function(e,t,n){"use strict";var a=n(24),r=n(0),i=n.n(r),o=n(19),c=n(8),u=n(163),l=n(41),s=n(75),d=n(166);function m(){var e=Object(a.a)(["\n    border-radius: 7px;\n    color: white;\n    outline: none;\n    border: none;\n    margin: 5px;\n    cursor: pointer;\n    background-color: ",";\n    &:hover {\n        background-color: ",";\n    }\n    font-size: 16px;\n    padding: 3px 5px 3px 5px;\n"]);return m=function(){return e},e}var f=o.b.button(m(),(function(e){return e.theme.palette.primary.light}),(function(e){return e.theme.palette.secondary.light})),v=Object(s.b)(null,{changeSingleSearchPageFilter:d.a})((function(e){var t=e.label,n=e.tagId,a=e.singleQueryType,r=Object(c.g)(),o=encodeURIComponent(n||t);return i.a.createElement(i.a.Fragment,null,t&&i.a.createElement(f,{onClick:function(){!function(e,t){switch(t){case u.b.bookPerson:e.changeSingleSearchPageFilter(l.b);break;case u.b.moviePerson:e.changeSingleSearchPageFilter(l.d);break;case u.b.tag:case u.b.genre:case u.b.searchBar:default:e.changeSingleSearchPageFilter(l.a)}}(e,a),r.push("/searchResult/param?singleQueryType=".concat(a,"&query=").concat(o))}},t))}));function b(){var e=Object(a.a)(["\n    margin-bottom: 15px;\n"]);return b=function(){return e},e}var g=o.b.div(b());t.a=function(e){var t=e.singleQueryType,n=e.tags,a=e.tagObjects;return i.a.createElement(g,null,n&&n.map((function(e,n){return i.a.createElement(v,{key:n,label:e,singleQueryType:t})})),!n&&a&&a.map((function(e,n){return i.a.createElement(v,{key:n,label:e.tagName,singleQueryType:t,tagId:e.tagId})})))}},173:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return u}));var a=n(30),r=function(e){return{type:a.e,reviewsArray:e}},i=function(e){return{type:a.a,text:e.text,userId:e.userId,userName:e.userName,datePosted:e.datePosted}},o=function(e){return{type:a.c,userId:e}},c=function(e){return{type:a.d,text:e.text,userId:e.userId,userName:e.userName,datePosted:e.datePosted}},u=function(e){return{type:a.b,userId:e.userId,userName:e.userName,rating:e.rating}}},175:function(e,t,n){"use strict";var a=n(64),r=n(40),i=n(24),o=n(0),c=n.n(o),u=n(184),l=n.n(u),s=n(152),d=n(238),m=n(183),f=n.n(m),v=n(185),b=n.n(v),g=n(19),p=n(75),h=n(173),E=n(162),O=n.n(E);function y(){var e=Object(i.a)(["\n    display: flex;\n    align-items: center;\n"]);return y=function(){return e},e}function j(){var e=Object(i.a)(["\n    padding: 0px !important;\n"]);return j=function(){return e},e}var x=Object(g.b)(s.a)(j()),w=g.b.div(y()),R=window.location.protocol+"//"+window.location.host;t.a=Object(p.b)(null,{changeRatingAction:h.b})((function(e){var t=Object(o.useState)(0),n=Object(r.a)(t,2),i=n[0],u=n[1],s=e.readonly,m=e.readOnlyRating,v=e.hideReadOnlyLabel,g=e.userRating,p=e.userId,h=e.userName,E="";function y(t){var n=i===t?t-1:t;u(n),p&&h&&function(e,t,n,a){e.changeRatingAction({userId:t,userName:n,rating:a}),a||e.userHasReviewText?O.a.put(R+"/reviewRatings/rating",{mediaId:e.mediaId,mediaType:e.mediaType,userId:t,rating:a}).then((function(e){})).catch((function(e){})):O.a.delete(R+"/reviewRatings"+"/".concat(e.mediaType,"/").concat(e.mediaId,"/").concat(t)).then((function(e){})).catch((function(e){}))}(e,p,h,n)}return s&&m?E=m.toFixed(2):g&&(E=g.toFixed(2)),Object(o.useEffect)((function(){i||u(g||0)}),[g]),c.a.createElement(d.a,{display:"flex"},Object(a.a)(Array(5)).map((function(e,t){return c.a.createElement(w,{key:t},s?c.a.createElement(c.a.Fragment,null,function(e,t){var n=((null===t||void 0===t?void 0:t.toFixed(2))||"0.00").split("."),a=Object(r.a)(n,2),i=a[0],o=a[1],u=parseInt(i),s=parseInt(o);if(e+1<=u)return c.a.createElement(f.a,{style:{fill:"#FFCC00"},fontSize:"small"});if(e!==u)return c.a.createElement(l.a,{style:{fill:"#FFCC00"},fontSize:"small"});var d=50*Math.round(s/50);return 0===d?c.a.createElement(l.a,{style:{fill:"#FFCC00"},fontSize:"small"}):50===d?c.a.createElement(b.a,{style:{fill:"#FFCC00"},fontSize:"small"}):100===d?c.a.createElement(f.a,{style:{fill:"#FFCC00"},fontSize:"small"}):void 0}(t,m)):c.a.createElement(x,{size:"small",onClick:function(){return y(t+1)}},t<i?c.a.createElement(f.a,{style:{fill:"#FFCC00"}}):c.a.createElement(l.a,{style:{fill:"#FFCC00"}})))})),c.a.createElement(d.a,{ml:1},s&&!v&&E))}))},202:function(e,t,n){"use strict";var a=n(40),r=n(24),i=n(19),o=n(0),c=n.n(o);function u(){var e=Object(r.a)(["\n    background-color: ",";\n    border: none;\n    outline: none;\n    font-size: 16px;\n    border-radius: 5px;\n    padding: 5px;\n    cursor: pointer;\n    margin: 5px;\n    color: ",";\n"]);return u=function(){return e},e}var l=i.b.button(u(),(function(e){var t=e.theme;return e.isAddedToUser?t.palette.grey[300]:t.palette.primary.light}),(function(e){return e.isAddedToUser?"black":"white"}));t.a=function(e){var t=e.addLabel,n=e.removeLabel,r=e.isAdded,i=e.toBackendOnClick,u=Object(o.useState)(!1),s=Object(a.a)(u,2),d=s[0],m=s[1];Object(o.useEffect)((function(){m(r)}),[r]);return c.a.createElement(l,{isAddedToUser:d,onClick:function(){return m(!d),void i()}},d?n:t)}},389:function(e,t,n){"use strict";n.r(t);var a=n(64),r=n(40),i=n(24),o=n(0),c=n.n(o),u=n(164),l=n(280),s=n(19),d=n(238);function m(){var e=Object(i.a)(["\n    margin-right: 10px;\n    background: none;\n    border: none;\n    color: "," || ",";\n    cursor: pointer;\n    font-size: ",";\n\n    &:hover {\n        color: ",";\n    }\n"]);return m=function(){return e},e}var f=s.b.button(m(),(function(e){return e.color}),(function(e){return e.theme.palette.grey[500]}),(function(e){return e.fontSize||"16px"}),(function(e){return e.theme.palette.primary.main})),v=function(e){var t=e.onClick,n=e.label,a=e.children,r=e.color;return c.a.createElement(f,{onClick:t,color:r},n||a)},b=n(75),g=n(173),p=n(162),h=n.n(p);function E(){var e=Object(i.a)(['\n    height: 100px;\n    width: 99%;\n    resize: vertical;\n    font-family: "Roboto", "Helvetica", "Arial", sans-serif;\n']);return E=function(){return e},e}var O,y=s.b.textarea(E());!function(e){e[e.Add=0]="Add",e[e.Edit=1]="Edit"}(O||(O={}));var j=window.location.protocol+"//"+window.location.host,x=Object(b.b)(null,{addReviewAction:g.a,editReviewAction:g.d})((function(e){var t,n=Object(o.useState)((null===(t=e.editCommentProps)||void 0===t?void 0:t.review.text)||""),a=Object(r.a)(n,2),i=a[0],u=a[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(y,{value:i,onChange:function(e){u(e.target.value)}}),c.a.createElement("div",{style:{textAlign:"right"}},c.a.createElement(v,{onClick:function(){var t=e.editCommentProps,n=e.addCommentProps,a=(new Date).toString();switch(e.actionType){case O.Add:e.addReviewAction({text:i,userId:n.userId,userName:n.userName,datePosted:a,rating:void 0}),h.a.put(j+"/reviewRatings/review",{mediaId:n.mediaId,mediaType:n.mediaType,userName:n.userName,userId:n.userId,rating:n.userRating,datePosted:a,text:i}).then((function(e){})).catch((function(e){}));break;case O.Edit:var r=t.review.userId;e.editReviewAction({text:i,userId:r,userName:t.review.userName,datePosted:a}),h.a.put(j+"/reviewRatings/review",{mediaId:t.mediaId,mediaType:t.mediaType,userName:t.review.userName,userId:t.review.userId,rating:t.userRating,datePosted:a,text:i}).then((function(e){})).catch((function(e){}));break;default:return}e.closeEdit()}},"Submit"),c.a.createElement(v,{onClick:e.closeEdit},"Cancel")))})),w=n(289),R=n.n(w);var k=n(175);function S(){var e=Object(i.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 10px;\n"]);return S=function(){return e},e}function I(){var e=Object(i.a)(["\n    border: none;\n    outline: none;\n    background-color: rgba(255, 255, 255, 0.90);\n    text-align: center;\n    height: 30px;\n    cursor: pointer;\n    padding: 0px;\n    width: 100%;\n    &:hover {\n        background-color: ",";\n    }\n    margin-bottom: 5px;\n"]);return I=function(){return e},e}function C(){var e=Object(i.a)(["\n    border: none;\n    box-shadow: 0px 0 5px rgba(0, 0, 0, 0.3);\n    outline: none;\n    background-color: rgba(255, 255, 255, 0.75);\n    text-align: center;\n    height: 30px;\n    cursor: pointer;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    padding: 0px;\n    width: 100%;\n    backdrop-filter: blur(1.5px);\n"]);return C=function(){return e},e}function A(){var e=Object(i.a)(["\n    max-height: ",";\n    overflow: ",";\n    position: relative;\n"]);return A=function(){return e},e}function D(){var e=Object(i.a)(["\n    display: flex;\n    justify-content: space-between;\n"]);return D=function(){return e},e}function T(){var e=Object(i.a)(["\n    border-top: ",";\n    border: ",";\n    min-height: 50px;\n    padding: 5px;\n    padding-bottom: 0px;\n"]);return T=function(){return e},e}var N=s.b.div(T(),(function(e){var t=e.theme;return"2px solid ".concat(t.palette.grey[400])}),(function(e){var t=e.theme;return e.isCurrentUserComment&&"2px solid ".concat(t.palette.grey[400])})),F=s.b.div(D()),P=s.b.div(A(),(function(e){return e.expanded?"":"200px"}),(function(e){return e.expanded?"visible":"hidden"})),L=s.b.button(C()),B=s.b.button(I(),(function(e){return e.theme.palette.grey[200]})),M=s.b.div(S());var U=Object(b.b)(null,{deleteReviewAction:g.c})((function(e){var t=Object(o.useState)(!1),n=Object(r.a)(t,2),a=n[0],i=n[1],u=Object(o.useState)(!1),s=Object(r.a)(u,2),m=s[0],f=s[1],b=Object(o.useState)(!1),g=Object(r.a)(b,2),p=g[0],E=g[1],y=Object(o.useRef)(null),j=e.review,w=e.currentUserId,S=e.isCurrentUserComment,I=new Date(j.datePosted).toDateString(),C=Object(o.useMemo)((function(){return w===j.userId}),[j,w]);return Object(o.useEffect)((function(){var e=function(e){var t=e.current;return t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth}(y);E(!!e)}),[j]),c.a.createElement(c.a.Fragment,null,c.a.createElement(N,{isCurrentUserComment:S},a?c.a.createElement(c.a.Fragment,null,c.a.createElement(l.a,{variant:"h5"},c.a.createElement("strong",null,j.userName)),c.a.createElement(x,{actionType:O.Edit,closeEdit:function(){return i(!1)},editCommentProps:e})):c.a.createElement(P,{expanded:m,ref:y},c.a.createElement(F,null,c.a.createElement(l.a,{variant:"h5"},c.a.createElement("strong",null,j.userName)," on ".concat(I)),C&&c.a.createElement("div",null,c.a.createElement(v,{onClick:function(){return i(!0)}},"Edit"),c.a.createElement(v,{onClick:function(){return function(e){var t=e.review.userId,n=e.review.userName;e.deleteReviewAction(t),e.userRating?h.a.put("/reviewRatings/review",{mediaId:e.mediaId,mediaType:e.mediaType,userName:n,userId:t,datePosted:"",text:""}).then((function(e){})).catch((function(e){})):h.a.delete("/reviewRatings"+"/".concat(e.mediaType,"/").concat(e.mediaId,"/").concat(e.review.userId)).then((function(e){})).catch((function(e){}))}(e)}},"Delete"))),c.a.createElement(M,null,c.a.createElement(d.a,{mr:1},"User rated: "),j.rating?c.a.createElement(k.a,{readonly:!0,readOnlyRating:j.rating,hideReadOnlyLabel:!0}):"no rating"),c.a.createElement(R.a,{source:j.text}),!m&&p&&c.a.createElement(L,{onClick:function(){return f(!0)}},c.a.createElement(l.a,{variant:"body1"},"Show more...")),m&&c.a.createElement(B,{onClick:function(){return f(!1)}},c.a.createElement(l.a,{variant:"body1"},"Show less")))))})),W=n(187),z=n(391),H=Object(b.b)((function(e,t){var n=e.reviewRatings.filter((function(e){return e.text})),a=[],r=void 0;return n.forEach((function(e){e.userId===t.userId?r=e:a.push(e)})),{otherUserReviews:a,currentUserReview:r}}))((function(e){var t=Object(o.useState)(!1),n=Object(r.a)(t,2),i=n[0],u=n[1],s=e.otherUserReviews,d=e.currentUserReview,m=e.mediaId,f=e.mediaType,b=e.userId,g=e.userName,p=e.userRating,h=!!d,E=Object(o.useState)([]),y=Object(r.a)(E,2),j=y[0],w=y[1],R=Object(o.useState)([]),k=Object(r.a)(R,2),S=k[0],I=k[1],C=Object(o.useState)("date"),A=Object(r.a)(C,2),D=A[0],T=A[1],N=Object(o.useState)("recent"),F=Object(r.a)(N,2),P=F[0],L=F[1];Object(o.useEffect)((function(){I(s);var e=null===s||void 0===s?void 0:s.slice(0,9);w(e)}),[s]);Object(o.useEffect)((function(){var e=[];switch(P){case"lowest":case"highest":e=S.sort((function(e,t){if(e.rating===t.rating){var n=e.datePosted&&new Date(e.datePosted),a=t.datePosted&&new Date(t.datePosted);return n>a?-1:n<a?1:0}return e.rating?t.rating?"highest"===P?e.rating<t.rating?1:-1:e.rating<t.rating?-1:1:-1:1}));break;case"recent":case"old":e=S.sort((function(e,t){var n=e.datePosted&&new Date(e.datePosted),a=t.datePosted&&new Date(t.datePosted);return n>a?"recent"===P?-1:1:n<a?"recent"===P?1:-1:0}))}var t=e.slice(0,9);w(Object(a.a)(t))}),[S,P,D]);var B=h?s.length+1:s.length;return c.a.createElement(c.a.Fragment,null,c.a.createElement(l.a,{variant:"h3",gutterBottom:!0},B||0," Total Reviews"),i?c.a.createElement(c.a.Fragment,null,c.a.createElement(l.a,{variant:"h5"},c.a.createElement("strong",null,g)),c.a.createElement(x,{actionType:O.Add,closeEdit:function(){return u(!1)},addCommentProps:{mediaType:f,mediaId:m,userId:b,userName:g,userRating:p}})):c.a.createElement("div",{style:{textAlign:"right"}},!h&&c.a.createElement(v,{onClick:function(){return u(!0)}},"Add Review")),d&&d.text&&c.a.createElement(c.a.Fragment,null,c.a.createElement(U,{review:d,currentUserId:b,isCurrentUserComment:!0,mediaId:m,mediaType:f,userRating:p})),c.a.createElement("br",null),s&&s.length>0&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement(z.a,{variant:"outlined",native:!0,style:{marginBottom:"5px",marginRight:"5px"},onChange:function(e){T(e.target.value),"date"===e.target.value&&L("recent"),"rating"===e.target.value&&L("highest")}},c.a.createElement("option",{value:"date"},"Date"),c.a.createElement("option",{value:"rating"},"Rating")),c.a.createElement(z.a,{variant:"outlined",native:!0,style:{marginBottom:"5px"},onChange:function(e){L(e.target.value)},value:P},c.a.createElement("option",{value:"date"===D?"recent":"highest"},"date"===D?"Recent":"Highest"),c.a.createElement("option",{value:"date"===D?"old":"lowest"},"date"===D?"Old":"Lowest"))),c.a.createElement(W.a,{dataLength:j.length,next:function(){setTimeout((function(){var e=j.length+5,t=S.slice(0,e);w(t)}),1e3)},hasMore:j.length<s.length,loader:c.a.createElement("h4",{style:{textAlign:"center"}},"Loading more reviews..."),scrollThreshold:1,endMessage:c.a.createElement("p",{style:{textAlign:"center"}},c.a.createElement("b",null,"No more reviews"))},j.map((function(e,t){return c.a.createElement(U,{key:t,review:e,currentUserId:b})})))))})),Q=n(163),G=n(281),V=n(287),J=n(371),K=n(160),_=n(170),q=n(202),Y=n(151),X=n(127),Z=n(369),$=n.n(Z),ee=n(370),te=n.n(ee),ne=function(e){var t=e.allOptions,n=e.favoriteOptions,i=e.favKey,u=e.userId,l=Object(o.useState)([]),s=Object(r.a)(l,2),d=s[0],m=s[1],f=c.a.useState(null),v=Object(r.a)(f,2),b=v[0],g=v[1];Object(o.useEffect)((function(){m(n)}),[n]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(Y.a,{onClick:function(e){g(e.currentTarget)},endIcon:c.a.createElement($.a,null),style:{fontSize:"12px"}},"Add to favorites"),c.a.createElement(X.a,{id:"simple-menu",anchorEl:b,keepMounted:!0,open:Boolean(b),onClose:function(){g(null)}},t.map((function(e,t){var n=d.includes(e);return c.a.createElement(K.a,{key:t,onClick:function(){return function(e,t){if(g(null),t){var n=d.filter((function(t){return t!==e}));m(n)}else m([].concat(Object(a.a)(d),[e]));var r=t?"REMOVE":"ADD",o=encodeURIComponent(e);h.a.put("/users/".concat(i,"/").concat(o,"/").concat(u),{action:r}).then((function(e){})).catch((function(e){}))}(e,n)},style:{whiteSpace:"normal"}},e,n&&c.a.createElement(te.a,{fontSize:"small"}))}))))},ae=n(177),re=n(8),ie=n(86);function oe(){var e=Object(i.a)(["\n    width: 100%;\n    margin: 5px !important;\n"]);return oe=function(){return e},e}function ce(){var e=Object(i.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 10px;\n"]);return ce=function(){return e},e}function ue(){var e=Object(i.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 10px;\n"]);return ue=function(){return e},e}function le(){var e=Object(i.a)(["\n    text-align: center;\n"]);return le=function(){return e},e}function se(){var e=Object(i.a)(["\n    width: 100%;\n    max-width: 300px;\n    min-height: 300px;\n    margin-bottom: 15px;\n    background-color: ",";\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return se=function(){return e},e}function de(){var e=Object(i.a)(["\n    width: 100%;\n    max-width: 300px;\n    margin-bottom: 15px;\n"]);return de=function(){return e},e}var me=s.b.img(de()),fe=s.b.div(se(),(function(e){return e.theme.palette.grey[300]})),ve=Object(s.b)(G.a)(le()),be=s.b.div(ue()),ge=s.b.div(ce()),pe=Object(s.b)(V.a)(oe());t.default=Object(b.b)(null,{loadAllReviewsAction:g.e})((function(e){var t=e.location.pathname.split("/").filter((function(e){return e})),n=Object(r.a)(t,2),i=n[0],s=n[1],m=Object(o.useState)(!1),f=Object(r.a)(m,2),v=f[0],b=f[1],g=Object(o.useState)(!1),p=Object(r.a)(g,2),E=p[0],O=p[1],y=Object(o.useState)(!1),j=Object(r.a)(y,2),x=j[0],w=j[1],R=Object(o.useState)({title:"No title",id:s,mediaType:Q.a.start,image:"",people:[""],genres:[""],blurb:"No description",publishedDate:"2020-01-01",avgRating:0}),S=Object(r.a)(R,2),I=S[0],C=S[1],A=Object(o.useState)({avgRating:0,userRating:0,userHasReviewText:!1}),D=Object(r.a)(A,2),T=D[0],N=D[1],F=Object(o.useState)({booksRead:[],moviesWatched:[],watchLater:[],readLater:[],favoriteMovies:[],favoriteBooks:[],favoriteMoviesDetails:[],favoriteBooksDetails:[],booksReadDetails:[],moviesWatchedDetails:[],readLaterDetails:[],watchLaterDetails:[],favoriteAuthors:[],favoriteDirectors:[],favoriteGenres:[]}),P=Object(r.a)(F,2),L=P[0],B=P[1],M=Object(o.useState)([]),U=Object(r.a)(M,2),W=U[0],V=U[1],Y=Object(o.useState)([]),X=Object(r.a)(Y,2),Z=X[0],$=X[1],ee=Object(o.useState)([]),te=Object(r.a)(ee,2),oe=te[0],ce=te[1],ue=sessionStorage.getItem("NS-session-data"),le=ue&&JSON.parse(ue),se=le.username,de=le.userId,he=Object(re.g)(),Ee=Object(o.useRef)({numberSubscriptions:0}),Oe=Object(o.useState)(!1),ye=Object(r.a)(Oe,2),je=ye[0],xe=ye[1],we=I.title,Re=I.image,ke=I.people,Se=I.blurb,Ie=I.genres,Ce=T.avgRating,Ae=T.userRating,De=T.userHasReviewText;Object(o.useEffect)((function(){Ee.current.numberSubscriptions++,xe(!0);var e=i===Q.a.book?"books":"movies";h.a.get("/".concat(e,"/").concat(s)).then((function(e){var t=e.data;t.title||(Ee.current.numberSubscriptions=0,he.push("/notFound")),Ee.current.numberSubscriptions&&(C({title:t.title||"No title",id:s,mediaType:i,image:t.image,people:t.people,genres:t.genres,blurb:t.blurb||"No description",publishedDate:t.publishedDate,avgRating:t.avgRating}),Ee.current.numberSubscriptions--,xe(!1))})).catch((function(e){"Could not fetch movie"===e.response.data.message&&(Ee.current.numberSubscriptions=0,he.push("/notFound"))}))}),[e,s,i,de]),Object(o.useEffect)((function(){Ee.current.numberSubscriptions++;var e=i===Q.a.book?"books":"movies";h.a.get("/".concat(e,"/tags/").concat(s)).then((function(e){var t=e.data;Ee.current.numberSubscriptions&&(V(t.nextStoryTags),Ee.current.numberSubscriptions--)})).catch((function(e){}))}),[e,s,i,de]),Object(o.useEffect)((function(){Ee.current.numberSubscriptions++,h.a.get("/reviewRatings/".concat(i,"/").concat(s)).then((function(t){var n=t.data.reviewArray;e.loadAllReviewsAction(n);var a=n.filter((function(e){return e.userId===de})),r=a.length>0?a[0].rating:void 0,i=a.length>0&&!!a[0].text;Ee.current.numberSubscriptions&&(N({avgRating:t.data.average,userRating:r,userHasReviewText:i}),Ee.current.numberSubscriptions--)})).catch((function(e){}))}),[e,s,i,de]),Object(o.useEffect)((function(){Ee.current.numberSubscriptions++,h.a.get("/users/userLists/".concat(de)).then((function(e){var t=e.data;Ee.current.numberSubscriptions&&(i===Q.a.movie?(t.watchLater.includes(s)&&b(!0),t.favoriteMovies.includes(s)&&O(!0),t.moviesWatched.includes(s)&&w(!0)):(t.readLater.includes(s)&&b(!0),t.favoriteBooks.includes(s)&&O(!0),t.booksRead.includes(s)&&w(!0)),B({booksRead:t.booksRead,moviesWatched:t.moviesWatched,watchLater:t.watchLater,readLater:t.readLater,favoriteMovies:t.favoriteMovies,favoriteBooks:t.favoriteBooks,favoriteMoviesDetails:t.favoriteMoviesDetails,favoriteBooksDetails:t.favoriteBooksDetails,booksReadDetails:t.booksReadDetails,moviesWatchedDetails:t.moviesWatchedDetails,readLaterDetails:t.readLaterDetails,watchLaterDetails:t.watchLaterDetails,favoriteAuthors:t.favoriteAuthors,favoriteDirectors:t.favoriteDirectors,favoriteGenres:t.favoriteGenres}),Ee.current.numberSubscriptions--)})).catch((function(e){}))}),[de,i,s]),Object(o.useEffect)((function(){Ee.current.numberSubscriptions++,h.a.get("/nextStoryTags").then((function(e){var t=e.data,n=W.map((function(e){return e.tagName})),a=[],r=[];t.forEach((function(e){n.includes(e.tagName)?r.push(e):a.push(e)})),Ee.current.numberSubscriptions&&($(a),ce(r),Ee.current.numberSubscriptions--)})).catch((function(e){}))}),[W]);var Te=function(e){var t=i===Q.a.book?"books":"movies";h.a.put("/".concat(t,"/updateNextStoryTags/").concat(s),{tagsArray:e}).then((function(e){})).catch((function(e){}))},Ne=function(e,t,n){var a={action:n,mediaObject:I};h.a.put("/users/".concat(e,"/").concat(t,"/").concat(de),a).then((function(e){})).catch((function(e){}))};return c.a.createElement(c.a.Fragment,null,je&&c.a.createElement(ie.a,null),c.a.createElement(u.a,{maxWidth:"lg"},c.a.createElement(G.a,{container:!0,direction:"row",spacing:5},c.a.createElement(ve,{item:!0,sm:3},Re?c.a.createElement(me,{src:Re}):c.a.createElement(fe,null,"No Image"),c.a.createElement("div",null,"Your rating:",c.a.createElement(ge,null,c.a.createElement(k.a,{userRating:Ae,readonly:!1,userId:de,userName:se,userHasReviewText:De,mediaId:s,mediaType:i})),c.a.createElement("div",null,c.a.createElement(q.a,{toBackendOnClick:function(){return function(e){var t=i===Q.a.movie?"moviesWatched":"booksRead";x?(w(!1),Ne(t,e,"REMOVE")):(w(!0),Ne(t,e,"ADD"))}(s)},isAdded:x,addLabel:"Add to ".concat(i===Q.a.movie?"watched":"read"),removeLabel:"Remove from ".concat(i===Q.a.movie?"watched":"read")})),c.a.createElement("div",null,c.a.createElement(q.a,{toBackendOnClick:function(){return function(e){var t=i===Q.a.movie?"watchLater":"readLater";v?(b(!1),Ne(t,e,"REMOVE")):(b(!0),Ne(t,e,"ADD"))}(s)},isAdded:v,addLabel:"Add to ".concat(i===Q.a.movie?"watch":"read"," later"),removeLabel:"Remove from ".concat(i===Q.a.movie?"watch":"read"," later")})),c.a.createElement("div",null,c.a.createElement(q.a,{toBackendOnClick:function(){return function(e){var t=i===Q.a.movie?"favoriteMovies":"favoriteBooks";E?(O(!1),Ne(t,e,"REMOVE")):(O(!0),Ne(t,e,"ADD"))}(s)},isAdded:E,addLabel:"Add favorite",removeLabel:"Remove favorite"})))),c.a.createElement(G.a,{item:!0,sm:6},c.a.createElement(l.a,{variant:"h1"},we," ",i===Q.a.movie?"(Movie)":"(Book)"),c.a.createElement(d.a,{fontStyle:"italic"},c.a.createElement(l.a,{variant:"subtitle1",gutterBottom:!0},null===ke||void 0===ke?void 0:ke.join(", "),ke&&""!==ke[0]&&c.a.createElement(ne,{allOptions:ke,favoriteOptions:i===Q.a.movie?L.favoriteDirectors:L.favoriteAuthors,userId:de,favKey:i===Q.a.movie?"favoriteDirectors":"favoriteAuthors"}))),c.a.createElement(be,null,c.a.createElement(l.a,{variant:"subtitle2"},"Avg members rating: "),c.a.createElement(k.a,{readOnlyRating:Ce,readonly:!0})),c.a.createElement(ae.a,{content:Se})),c.a.createElement(G.a,{item:!0,sm:3},"Genres:",c.a.createElement(_.a,{tags:Ie,singleQueryType:Q.b.genre}),c.a.createElement("div",null,Ie.length>0&&c.a.createElement(ne,{allOptions:Ie,favoriteOptions:L.favoriteGenres,userId:de,favKey:"favoriteGenres"})),"Tags:",c.a.createElement(_.a,{tagObjects:oe,singleQueryType:Q.b.tag}),Z.length>0&&c.a.createElement(pe,{variant:"outlined"},c.a.createElement(J.a,{id:"demo-simple-select-outlined-label"},"Add a tag"),c.a.createElement(z.a,{labelId:"add-tag-label",id:"add-tag",value:"",onChange:function(e){var t=[].concat(Object(a.a)(oe),[e.target.value]),n=Z.filter((function(t){return t.tagId!==e.target.value.tagId}));ce(t),$(n),Te(t)},label:"Add a tag"},Z.map((function(e,t){return c.a.createElement(K.a,{key:"".concat(t,"_add"),value:e},e.tagName)})))),oe.length>0&&c.a.createElement(pe,{variant:"outlined"},c.a.createElement(J.a,{id:"demo-simple-select-outlined-label"},"Delete a tag"),c.a.createElement(z.a,{labelId:"delete-tag-label",id:"delete-tag",value:"",onChange:function(e){var t=oe.filter((function(t){return t.tagId!==e.target.value.tagId})),n=[].concat(Object(a.a)(Z),[e.target.value]);ce(t),$(n),Te(t)},label:"Delete a tag"},oe.map((function(e,t){return c.a.createElement(K.a,{key:"".concat(t,"_delete"),value:e},e.tagName)}))))))),c.a.createElement(u.a,{maxWidth:"md"},c.a.createElement(H,{mediaId:s,mediaType:i,userName:se,userId:de,userRating:Ae})))}))}}]);
//# sourceMappingURL=15.cad11428.chunk.js.map