{"version":3,"sources":["containers/Container/index.tsx","assets/MockCover.png","constants/dataTypes.ts","components/AddToUserButton/index.tsx","components/TagButton/index.tsx","components/TagsSection/index.tsx","components/Button/index.tsx","components/CommentEditor/index.tsx","actions/reviewRatingActions.ts","components/StarRater/index.tsx","components/CommentBlock/index.tsx","utils/styleHelpers.ts","components/ReviewList/index.tsx","components/FavPeopleDropDown/index.tsx","containers/MediaPage/index.tsx"],"names":["StyledContainer","styled","Container","MarginContainer","props","maxWidth","children","module","exports","MediaType","StyledButton","button","theme","isAddedToUser","palette","grey","primary","light","AddToUserButton","addLabel","removeLabel","isAdded","toBackendOnClick","useState","setIsAddedToUser","useEffect","onClick","StyledTagButton","secondary","TagButton","tag","StyledTagsSection","div","TagsSection","tags","tagObjects","map","index","key","tagObject","tagName","color","fontSize","main","Button","label","CommentEditorAction","TextArea","textarea","host","window","location","protocol","connect","addReviewAction","reviewObject","type","ADD_REVIEW","text","userId","userName","datePosted","editReviewAction","EDIT_REVIEW","editCommentProps","review","currentText","setCurrentText","value","onChange","event","target","style","textAlign","addCommentProps","now","Date","toString","actionType","Add","rating","undefined","axios","put","mediaId","mediaType","userRating","then","res","console","log","catch","err","Edit","closeEdit","StyledIconButton","IconButton","VerticallyCenteredDiv","changeRatingAction","CHANGE_RATING","ratedStar","setStar","readonly","readOnlyRating","hideReadOnlyLabel","twoDecimalRatingString","clickStar","starIndex","ratingToSet","userHasReviewText","delete","changeRating","toFixed","Box","display","Array","star","split","wholeNumberString","decimalString","wholeNumber","parseInt","decimalTimes100","fill","closestFifty","Math","round","getIcon","size","ml","Review","isCurrentUserComment","TopBar","ExpandableDiv","expanded","ShowMoreButton","ShowLessButton","deleteReviewAction","DELETE_REVIEW","isEdit","setIsEdit","setExpanded","hasOverflow","setHasOverflow","expandableRef","useRef","currentUserId","date","toDateString","isAuthor","useMemo","isOverflowing","ref","element","current","scrollHeight","clientHeight","scrollWidth","clientWidth","hasDivOverflown","Typography","variant","reviewUserName","deleteReview","mr","source","state","ownProps","reviews","reviewRatings","filter","r","otherUserReviews","currentUserReview","forEach","push","addCommentEditorOpen","setAddCommentEditor","hasAddedReview","initialStateReviews","slice","stateReviews","setStateReviews","rerenderReviews","totalReviews","length","gutterBottom","dataLength","next","setTimeout","theFetchNum","fetchedReviews","hasMore","loader","endMessage","FavPeopleDropDown","allPeople","favoritePeople","favKey","favPeople","setFavPeople","React","anchorEl","setAnchorEl","currentTarget","endIcon","Menu","id","keepMounted","open","Boolean","onClose","p","isFav","includes","MenuItem","person","filteredFavs","act","action","response","error","handleClose","StyledImage","img","StyledGridItem","Grid","CenteredDiv","StyledFormControl","FormControl","loadAllReviewsAction","reviewsArray","LOAD_REVIEWS_FROM_DB","pathname","o","isForLater","setForLater","isFavorite","setFavorite","watchedOrRead","setWatchedOrRead","title","movie","image","people","genres","blurb","avgRating","mediaObject","setMediaObject","booksRead","moviesWatched","watchLater","readLater","favoriteMovies","favoriteBooks","favoriteAuthors","favoriteDirectors","userLists","setUserLists","storyTags","setStoryTags","unaddedStoryTags","setUnaddedStoryTags","addedStoryTags","setAddedStoryTags","sessionDataString","sessionStorage","getItem","sessionDataObj","JSON","parse","username","mediaRouteType","book","get","mediaRes","reviewRatingRes","data","reviewArray","userRatingReviewArr","MockCover","average","nextStoryTags","sortedTags","sort","a","b","storyTagNames","t","unAdded","added","updateMediaInDB","tagsArray","addOrRemoveCall","container","direction","spacing","item","sm","src","addOrRemoveWatchOrRead","addOrRemoveWatchReadLater","addOrRemoveFavorites","fontStyle","join","InputLabel","Select","labelId","newAddedTags","filteredDeleteTags","tagId","filteredStoryTags","newDeleteTags"],"mappings":"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","file":"static/js/10.92d132cc.chunk.js","sourcesContent":["import React, {ReactNode} from 'react';\nimport Container from '@material-ui/core/Container';\nimport styled from 'styled-components';\n\nconst StyledContainer = styled(Container)`\n    margin-top: 85px;\n`;\n\ninterface MarginContainerProps {\n    maxWidth: 'lg'\n        | 'md'\n        | 'sm'\n        | 'xl'\n        | 'xs'\n        | false;\n    children: ReactNode;\n}\n\nconst MarginContainer: React.FC<MarginContainerProps> = (props: MarginContainerProps) => {\n    return (\n        <StyledContainer maxWidth={props.maxWidth}>{props.children}</StyledContainer>\n    );\n};\n\nexport default MarginContainer;\n","module.exports = __webpack_public_path__ + \"static/media/MockCover.4d59545d.png\";","export enum MediaType {\n    movie = 'movie',\n    book = 'book'\n}\n\nexport type CardData = {\n    title: string,\n    id: string,\n    mediaType: MediaType,\n    image: string, // the url, etc to the image\n    genres: string[],\n    nextStoryTags: string[],\n    people: string,\n    blurb: string,\n    avgRating: number\n}\n","import styled from 'styled-components';\nimport React, {useEffect, useState} from 'react';\n\nconst StyledButton = styled.button<{ isAddedToUser: boolean }>`\n    background-color: ${({ theme, isAddedToUser }) => isAddedToUser ? theme.palette.grey[300] : theme.palette.primary.light};\n    border: none;\n    outline: none;\n    font-size: 16px;\n    border-radius: 5px;\n    padding: 5px;\n    cursor: pointer;\n    margin: 5px;\n    color: ${({ isAddedToUser }) => isAddedToUser ? 'black' : 'white'};\n`;\n\ninterface AddToUserButtonProps {\n    addLabel: string;\n    removeLabel: string;\n    isAdded: boolean;\n    toBackendOnClick: any;\n}\n\nconst AddToUserButton: React.FC<AddToUserButtonProps> = (props: AddToUserButtonProps) => {\n    const { addLabel, removeLabel,isAdded, toBackendOnClick } = props;\n    const [isAddedToUser, setIsAddedToUser] = useState<boolean>(false);\n\n    useEffect(() => {\n        setIsAddedToUser(isAdded);\n    }, [isAdded]);\n\n    const toggleAddedToUser = () => {\n        if (isAddedToUser) {\n            setIsAddedToUser(false);\n        } else {\n            setIsAddedToUser(true);\n        }\n        toBackendOnClick();\n    };\n\n    return (\n        <StyledButton\n            isAddedToUser={isAddedToUser}\n            onClick={() => toggleAddedToUser()}\n        >\n            {isAddedToUser ? removeLabel : addLabel}\n        </StyledButton>\n    );\n};\n\nexport default AddToUserButton;\n","import React from 'react';\nimport styled from 'styled-components';\n\ninterface TagsButtonProps {\n    tag: string;\n}\n\nconst StyledTagButton = styled.button`\n    border-radius: 7px;\n    color: white;\n    outline: none;\n    border: none;\n    margin: 5px;\n    cursor: pointer;\n    background-color: ${({ theme }) => theme.palette.primary.light};\n    &:hover {\n        background-color: ${({ theme }) => theme.palette.secondary.light};\n    }\n    font-size: 16px;\n    padding: 3px 5px 3px 5px;\n`;\n\nconst TagButton: React.FC<TagsButtonProps> = (props: TagsButtonProps) => {\n    const { tag } = props;\n    return (\n        <>\n            {tag && <StyledTagButton>{tag}</StyledTagButton>}\n        </>\n    );\n};\n\nexport default TagButton;\n","import React from 'react';\nimport TagButton from '../TagButton';\nimport styled from 'styled-components';\n\ninterface TagsSectionProps {\n    tags?: string[],\n    tagObjects?: Array<{ tagId: string, tagName: string }>\n}\n\nconst StyledTagsSection = styled.div`\n    margin-bottom: 15px;\n`;\n\nconst TagsSection: React.FC<TagsSectionProps> = (props: TagsSectionProps) => {\n    const { tags, tagObjects } = props;\n    return (\n        <StyledTagsSection>\n            { tags && tags.map((tag, index) => <TagButton key={index} tag={tag}/>) }\n            { !tags && tagObjects && tagObjects.map((tagObject, index) => <TagButton key={index} tag={tagObject.tagName}/>) }\n        </StyledTagsSection>\n    );\n};\n\nexport default TagsSection;\n","import React from 'react';\nimport styled from 'styled-components';\n\nconst StyledButton = styled.button<{fontSize?: string, color?: string}>`\n    margin-right: 10px;\n    background: none;\n    border: none;\n    color: ${(props) => props.color} || ${({ theme }) => theme.palette.grey[500]};\n    cursor: pointer;\n    font-size: ${(props) => props.fontSize || '16px'};\n\n    &:hover {\n        color: ${({ theme }) => theme.palette.primary.main};\n    }\n`;\n\ninterface ButtonProps {\n    onClick: () => void;\n    label?: string;\n    children?: string;\n    fontSize?: string;\n    color?: string;\n}\n\nconst Button: React.FC<ButtonProps> = (props: ButtonProps) => {\n    const {onClick, label, children, color} = props;\n    return (\n        <StyledButton onClick={onClick} color={color}>\n            {label || children}\n        </StyledButton>\n    );\n};\n\nexport default Button;\n","import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport Button from '../Button';\nimport {connect} from 'react-redux';\nimport {addReviewAction, editReviewAction, ReviewObjectType} from '../../actions/reviewRatingActions';\nimport axios from 'axios';\n\nconst TextArea = styled.textarea`\n    height: 100px;\n    width: 99%;\n    resize: vertical;\n    font-family: \"Roboto\", \"Helvetica\", \"Arial\", sans-serif\n`;\n\nexport enum CommentEditorAction {\n    Add,\n    Edit\n}\n\nconst host = window.location.protocol + '//'+ window.location.host;\n\nconst CommentEditor: React.FC<any> = (props: any) => {\n    const [currentText, setCurrentText] = useState(props.editCommentProps?.review.text || '');\n\n    const submit = () => {\n        const { editCommentProps, addCommentProps } = props;\n        const now = new Date().toString();\n        switch(props.actionType) {\n            case CommentEditorAction.Add:\n                props.addReviewAction({\n                    text: currentText,\n                    userId: addCommentProps.userId,\n                    userName: addCommentProps.userName,\n                    datePosted: now,\n                    rating: undefined\n                } as ReviewObjectType);\n                axios.put(host + '/reviewRatings/review',\n                    {\n                        mediaId: addCommentProps.mediaId,\n                        mediaType: addCommentProps.mediaType,\n                        userName: addCommentProps.userName,\n                        userId: addCommentProps.userId,\n                        rating: addCommentProps.userRating,\n                        datePosted: now,\n                        text: currentText\n                    })\n                    .then((res: any) => {\n                        console.log(res);\n                    })\n                    .catch((err: any) => {\n                        console.log(err);\n                    });\n                break;\n            case CommentEditorAction.Edit:\n                const userId = editCommentProps.review.userId;\n                props.editReviewAction({\n                    text: currentText,\n                    userId: userId,\n                    userName: editCommentProps.review.userName,\n                    datePosted: now\n                } as ReviewObjectType);\n                axios.put(host + '/reviewRatings/review',\n                    {\n                        mediaId: editCommentProps.mediaId,\n                        mediaType: editCommentProps.mediaType,\n                        userName: editCommentProps.review.userName,\n                        userId: editCommentProps.review.userId,\n                        rating: editCommentProps.userRating,\n                        datePosted: now,\n                        text: currentText\n                    })\n                    .then((res: any) => {\n                        console.log(res);\n                    })\n                    .catch((err: any) => {\n                        console.log(err);\n                    });\n                break;\n            default:\n                return;\n        }\n        props.closeEdit();\n    };\n\n    const changeMessageText = (event: any) => {\n        setCurrentText(event.target.value);\n    };\n\n    // TODO use a better editor - markdown text area? - for the text\n    return (\n        <>\n            <TextArea value={currentText} onChange={changeMessageText}/>\n            <div style={{textAlign: 'right'}}>\n                <Button onClick={submit}>Submit</Button>\n                <Button onClick={props.closeEdit}>Cancel</Button>\n            </div>\n        </>\n    );\n};\n\nexport default connect(null, { addReviewAction, editReviewAction })(CommentEditor);\n","import {\n    ADD_REVIEW, CHANGE_RATING,\n    DELETE_REVIEW,\n    EDIT_REVIEW,\n    LOAD_REVIEWS_FROM_DB,\n} from '../constants/reviewRatingConstants';\n\nexport interface ReviewObjectType {\n    text: string,\n    userId: string,\n    userName: string,\n    datePosted: string,\n    rating?: number | undefined\n}\n\nexport const loadAllReviewsAction = (reviewsArray: any[]) => {\n    return {\n        type: LOAD_REVIEWS_FROM_DB,\n        reviewsArray: reviewsArray\n    };\n};\n\nexport const addReviewAction = (reviewObject: ReviewObjectType) => {\n    return {\n        type: ADD_REVIEW,\n        text: reviewObject.text,\n        userId: reviewObject.userId,\n        userName: reviewObject.userName,\n        datePosted: reviewObject.datePosted\n    };\n};\n\nexport const deleteReviewAction = (userId: string) => {\n    return {\n        type: DELETE_REVIEW,\n        userId: userId\n    };\n};\n\nexport const editReviewAction = (reviewObject: ReviewObjectType) => {\n    return {\n        type: EDIT_REVIEW,\n        text: reviewObject.text,\n        userId: reviewObject.userId,\n        userName: reviewObject.userName,\n        datePosted: reviewObject.datePosted\n    };\n};\n\n\nexport const changeRatingAction = (reviewObject: { userId: string, userName: string, rating: number | undefined }) => {\n    return {\n        type: CHANGE_RATING,\n        userId: reviewObject.userId,\n        userName: reviewObject.userName,\n        rating: reviewObject.rating\n    };\n};","import React, {useEffect, useState} from 'react';\nimport StarBorderIcon from '@material-ui/icons/StarBorder';\nimport {Box, IconButton} from '@material-ui/core';\nimport StarIcon from '@material-ui/icons/Star';\nimport StarHalfIcon from '@material-ui/icons/StarHalf';\nimport styled from 'styled-components';\nimport {connect} from 'react-redux';\nimport {changeRatingAction} from '../../actions/reviewRatingActions';\nimport axios from 'axios';\nimport {MediaType} from '../../constants/dataTypes';\n\ninterface StarRaterProps {\n    readonly: boolean\n\n    // required if readonly === true\n    readOnlyRating?: number;\n    hideReadOnlyLabel?: boolean;\n\n    // required if readonly === false\n    userRating?: number;\n    userId?: string;\n    userName?: string;\n    userHasReviewText?: boolean;\n    mediaId?: string;\n    mediaType?: MediaType;\n}\n\nconst StyledIconButton = styled(IconButton)`\n    padding: 0px !important;\n`;\n\nconst VerticallyCenteredDiv = styled.div`\n    display: flex;\n    align-items: center;\n`;\n\nconst host = window.location.protocol + '//'+ window.location.host;\n\nconst getIcon = (index: number, rating: number | undefined) => {\n    const twoDecimalString = rating?.toFixed(2) || '0.00';\n    const [wholeNumberString, decimalString] = twoDecimalString.split('.');\n    const wholeNumber = parseInt(wholeNumberString);\n    const decimalTimes100 = parseInt(decimalString);\n    if ((index + 1) <= wholeNumber) {\n        return <StarIcon style={{fill: '#FFCC00'}} fontSize={'small'}/>;\n    } else if (index === wholeNumber) {\n        const closestFifty = Math.round(decimalTimes100 / 50)*50;\n        if (closestFifty === 0) {\n            return <StarBorderIcon style={{fill: '#FFCC00'}} fontSize={'small'}/>;\n        } else if (closestFifty === 50) {\n            return <StarHalfIcon style={{fill: '#FFCC00'}} fontSize={'small'}/>;\n        } else if (closestFifty === 100) {\n            return <StarIcon style={{fill: '#FFCC00'}} fontSize={'small'}/>;\n        }\n    } else {\n        return <StarBorderIcon style={{fill: '#FFCC00'}} fontSize={'small'}/>;\n    }\n};\n\nconst changeRating = (props: any, userId: string, userName: string, rating: number | undefined) => {\n    props.changeRatingAction({ userId, userName, rating });\n    if (!rating && !props.userHasReviewText) {\n        axios.delete(host + `/reviewRatings`\n            + `/${props.mediaType}/${props.mediaId}/${userId}`)\n            .then((res: any) => {\n                console.log('Successfully deleted the reviewRating', res);\n            })\n            .catch((err: any) => {\n                console.log(err);\n            });\n    } else {\n        axios.put(host + '/reviewRatings/rating',\n            {\n                mediaId: props.mediaId,\n                mediaType: props.mediaType,\n                userId: userId,\n                rating: rating\n            })\n            .then((res: any) => {\n                console.log('Successfully put the rating: ', res);\n            })\n            .catch((err: any) => {\n                console.log(err);\n            });\n    }\n};\n\nconst StarRater: React.FC<StarRaterProps> = (props: StarRaterProps) => {\n    const [ratedStar, setStar] = useState(0);\n    const { readonly, readOnlyRating, hideReadOnlyLabel, userRating, userId, userName } = props;\n    let twoDecimalRatingString = ''; // TODO set up tooltip functionality\n    if (readonly && readOnlyRating) {\n        twoDecimalRatingString = readOnlyRating.toFixed(2);\n    } else if (userRating) {\n        twoDecimalRatingString = userRating.toFixed(2);\n    }\n\n    useEffect(() => {\n        if (!ratedStar) {\n            setStar(userRating || 0);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [userRating]);\n\n    function clickStar(starIndex: number) {\n        const ratingToSet = ratedStar === starIndex ? starIndex - 1 : starIndex;\n        setStar(ratingToSet);\n        userId && userName && changeRating(props, userId, userName, ratingToSet);\n        // TODO use the api to set the rating (add the media type and media id as props)\n    }\n\n    return (\n        <Box display='flex'>\n            {[...Array(5)].map((star, index) => {\n                return (\n                    <VerticallyCenteredDiv key={index}>\n                        {readonly ?\n                            <>\n                                {\n                                    getIcon(index, readOnlyRating)\n                                }\n                            </>\n                            :\n                            <StyledIconButton size={'small'} onClick={() => clickStar(index + 1)}>\n                                {index < ratedStar ?\n                                    <StarIcon style={{fill: '#FFCC00'}} />\n                                    :\n                                    <StarBorderIcon style={{fill: '#FFCC00'}} />\n                                }\n                            </StyledIconButton>\n                        }\n                    </VerticallyCenteredDiv>\n                );\n            })}\n            <Box ml={1}>{readonly && !hideReadOnlyLabel && twoDecimalRatingString}</Box>\n        </Box>\n    );\n};\n\nexport default connect(null, { changeRatingAction })(StarRater);\n","import React, {useEffect, useMemo, useRef, useState} from 'react';\nimport styled from 'styled-components';\nimport {Box, Typography} from '@material-ui/core';\nimport Button from '../Button';\nimport {connect} from 'react-redux';\nimport {deleteReviewAction} from '../../actions/reviewRatingActions';\nimport CommentEditor, {CommentEditorAction} from '../CommentEditor';\nimport ReactMarkdown from 'react-markdown';\nimport {hasDivOverflown} from '../../utils/styleHelpers';\nimport StarRater from '../StarRater';\nimport axios from 'axios';\n\ninterface CommentBlockProps {\n    review: any,\n    currentUserId: string,\n    isCurrentUserComment?: boolean,\n    mediaId?: string,\n    mediaType?: string,\n    userRating?: number | undefined;\n}\n\nconst Review = styled.div<{ isCurrentUserComment: boolean | undefined }>`\n    border-top: ${({ theme }) => `2px solid ${theme.palette.grey[400]}`};\n    border: ${({ theme, isCurrentUserComment }) => isCurrentUserComment && `2px solid ${theme.palette.grey[400]}`};\n    min-height: 50px;\n    padding: 5px;\n    padding-bottom: 0px;\n`;\n\nconst TopBar = styled.div`\n    display: flex;\n    justify-content: space-between;\n`;\n\nconst ExpandableDiv = styled.div<{ expanded: boolean }>`\n    max-height: ${(props) => props.expanded ? '' : '200px'};\n    overflow: ${(props) => props.expanded ? 'visible' : 'hidden'};\n    position: relative;\n`;\n\nconst ShowMoreButton = styled.button`\n    border: none;\n    box-shadow: 0px 0 5px rgba(0, 0, 0, 0.3);\n    outline: none;\n    background-color: rgba(255, 255, 255, 0.75);\n    text-align: center;\n    height: 30px;\n    cursor: pointer;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    padding: 0px;\n    width: 100%;\n    backdrop-filter: blur(1.5px);\n`;\n\nconst ShowLessButton = styled.button`\n    border: none;\n    outline: none;\n    background-color: rgba(255, 255, 255, 0.90);\n    text-align: center;\n    height: 30px;\n    cursor: pointer;\n    padding: 0px;\n    width: 100%;\n    &:hover {\n        background-color: ${({ theme }) => theme.palette.grey[200]};\n    }\n    margin-bottom: 5px;\n`;\n\nconst VerticallyCenteredDiv = styled.div`\n    display: flex;\n    align-items: center;\n    margin-bottom: 10px;\n`;\n\nconst host = window.location.protocol + '//'+ window.location.host;\n\nfunction deleteReview(props: any) {\n    const userId = props.review.userId;\n    const reviewUserName = props.review.userName;\n    props.deleteReviewAction(userId);\n    if (props.userRating) { // if a rating exists, don't delete from db\n        axios.put(host + '/reviewRatings/review',\n            {\n                mediaId: props.mediaId,\n                mediaType: props.mediaType,\n                userName: reviewUserName,\n                userId: userId,\n                datePosted: '',\n                text: ''\n            })\n            .then((res: any) => {\n                console.log(res);\n            })\n            .catch((err: any) => {\n                console.log(err);\n            });\n    } else { // if no rating, then delete whole reviewRating document from db\n        axios.delete(host + `/reviewRatings`\n        + `/${props.mediaType}/${props.mediaId}/${props.review.userId}`)\n            .then((res: any) => {\n                console.log('successfully deleted the reviewRating', res);\n            })\n            .catch((err: any) => {\n                console.log(err);\n            });\n    }\n}\n\nconst CommentBlock: React.FC<CommentBlockProps> = (props: CommentBlockProps) => {\n    const [isEdit, setIsEdit] = useState(false);\n    const [expanded, setExpanded] = useState(false);\n    const [hasOverflow, setHasOverflow] = useState(false);\n    const expandableRef = useRef(null);\n    const { review, currentUserId, isCurrentUserComment } = props;\n    const date = new Date(review.datePosted).toDateString();\n\n    const isAuthor = useMemo(() => {\n        return currentUserId === review.userId;\n    }, [review, currentUserId]);\n\n    useEffect(() => {\n        const isOverflowing = hasDivOverflown(expandableRef);\n        if (isOverflowing) {\n            setHasOverflow(true);\n        } else {\n            setHasOverflow(false);\n        }\n    }, [review]);\n    // TODO only show the edit and delete buttons if the userId matches with the current user's id\n    return (\n        <>\n            <Review isCurrentUserComment={isCurrentUserComment}>\n            {isEdit ?\n                <>\n                    <Typography variant={'h5'}><strong>{review.userName}</strong></Typography>\n                    <CommentEditor\n                        actionType={CommentEditorAction.Edit}\n                        closeEdit={() => setIsEdit(false)}\n                        editCommentProps={props}\n                    />\n                </>\n                :\n                <ExpandableDiv expanded={expanded} ref={expandableRef}>\n                    <TopBar>\n                        <Typography variant={'h5'}>\n                            <strong>\n                                {review.userName}\n                            </strong>\n                            {` on ${date}`}\n                        </Typography>\n                        {isAuthor &&\n                            <div>\n                                <Button onClick={() => setIsEdit(true)}>Edit</Button>\n                                <Button onClick={() => deleteReview(props)}>Delete</Button>\n                            </div>\n                        }\n                    </TopBar>\n                    <VerticallyCenteredDiv>\n                        <Box mr={1}>User rated: </Box>\n                        {review.rating ?\n                            <StarRater readonly readOnlyRating={review.rating} hideReadOnlyLabel />\n                            : 'no rating'\n                        }\n                    </VerticallyCenteredDiv>\n                    <ReactMarkdown source={review.text} />\n                    {!expanded && hasOverflow &&\n                        <ShowMoreButton onClick={() => setExpanded(true)}>\n                            <Typography variant={'body1'}>Show more...</Typography>\n                        </ShowMoreButton>\n                    }\n                    {expanded &&\n                        <ShowLessButton onClick={() => setExpanded(false)}>\n                            <Typography variant={'body1'}>Show less</Typography>\n                        </ShowLessButton>\n                    }\n                </ExpandableDiv>}\n            </Review>\n        </>\n    );\n};\n\nexport default connect(null, { deleteReviewAction })(CommentBlock);\n","export function hasDivOverflown(ref: { current: any; }): boolean {\n    const element = ref.current;\n    return element.scrollHeight > element.clientHeight || element.scrollWidth > element.clientWidth;\n}\n","import React, {useEffect, useState} from 'react';\nimport CommentBlock from '../CommentBlock';\nimport {Typography} from '@material-ui/core';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport CommentEditor, {CommentEditorAction} from '../CommentEditor';\nimport Button from '../Button';\nimport { MediaType } from '../../constants/dataTypes';\nimport {connect} from 'react-redux';\n\ninterface ReviewListProps {\n    mediaId: string,\n    mediaType: MediaType,\n    otherUserReviews: any[],\n    currentUserReview?: any,\n    userId: string,\n    userName: string,\n    userRating?: number | undefined\n}\n\nconst ReviewList: React.FC<ReviewListProps> = (props: ReviewListProps) => {\n    const [addCommentEditorOpen, setAddCommentEditor] = useState(false);\n    const { otherUserReviews, currentUserReview, mediaId, mediaType, userId, userName, userRating } = props;\n\n    let hasAddedReview = !!currentUserReview;\n\n    const initialStateReviews = otherUserReviews?.slice(0,9);\n    const [stateReviews, setStateReviews] = useState(initialStateReviews);\n\n    useEffect(() => {\n        const rerenderReviews = otherUserReviews?.slice(0,9);\n        setStateReviews(rerenderReviews);\n    }, [otherUserReviews]);\n\n    const fetchMoreData = () => {\n        setTimeout(() => {\n            const currentReviewLength = stateReviews.length;\n            const theFetchNum = currentReviewLength + 5;\n            const fetchedReviews = otherUserReviews.slice(0, theFetchNum);\n            setStateReviews(fetchedReviews);\n        }, 1000);\n    };\n\n    const totalReviews = hasAddedReview ? otherUserReviews.length + 1 : otherUserReviews.length;\n\n    return (\n        <>\n            <Typography variant={'h3'} gutterBottom>\n                {totalReviews || 0} Total Reviews\n            </Typography>\n            {addCommentEditorOpen ?\n                <>\n                    <Typography variant={'h5'}><strong>{userName}</strong></Typography>\n                    <CommentEditor\n                        actionType={CommentEditorAction.Add}\n                        closeEdit={() => setAddCommentEditor(false)}\n                        addCommentProps={{\n                            mediaType: mediaType,\n                            mediaId: mediaId,\n                            userId: userId,\n                            userName: userName,\n                            userRating: userRating\n                        }}\n                    />\n                </> :\n                <div style={{textAlign: 'right'}}>\n                    {!hasAddedReview &&\n                        <Button onClick={() => setAddCommentEditor(true)}>\n                            Add Review\n                        </Button>\n                    }\n                </div>\n            }\n            {currentUserReview && currentUserReview.text &&\n                <>\n                    <CommentBlock\n                        review={currentUserReview}\n                        currentUserId={userId}\n                        isCurrentUserComment={true}\n                        mediaId={mediaId}\n                        mediaType={mediaType}\n                        userRating={userRating}\n                    />\n                </>\n            }\n            <br/>\n            {otherUserReviews ? <InfiniteScroll\n                dataLength={stateReviews.length}\n                next={fetchMoreData}\n                hasMore={stateReviews.length < otherUserReviews.length}\n                loader={<h4 style={{textAlign: 'center'}}>Loading more reviews...</h4>}\n                endMessage={\n                    <p style={{textAlign: 'center'}}>\n                        <b>No more reviews</b>\n                    </p>\n                }>\n                {stateReviews.map((r, index) =>\n                    <CommentBlock\n                        key={index}\n                        review={r}\n                        currentUserId={userId}\n                    />)\n                }\n            </InfiniteScroll> : null}\n        </>\n    );\n};\n\nconst mapStateToProps = (state: any, ownProps: any) => {\n    const reviews = state.reviewRatings.filter((r: any) => r.text);\n    let otherUserReviews: any[] = [];\n    let currentUserReview: any = undefined;\n    reviews.forEach((r: any) => {\n        r.userId === ownProps.userId ? currentUserReview = r : otherUserReviews.push(r);\n    });\n    return {\n        otherUserReviews: otherUserReviews,\n        currentUserReview: currentUserReview\n    };\n};\n\nexport default connect(mapStateToProps)(ReviewList);\n","import React, {useEffect, useState} from 'react';\nimport {Button, Menu, MenuItem} from '@material-ui/core';\nimport DetailsIcon from '@material-ui/icons/Details';\nimport CheckIcon from '@material-ui/icons/Check';\nimport axios from 'axios';\n\ninterface FavPeopleDropDownProps {\n    allPeople: Array<string>;\n    favoritePeople: Array<string>;\n    favKey: string;\n    userId: string;\n}\n\nconst FavPeopleDropDown = (props: FavPeopleDropDownProps) => {\n    const { allPeople, favoritePeople, favKey, userId } = props;\n    const [favPeople, setFavPeople] = useState<Array<string>>([]);\n    const [anchorEl, setAnchorEl] = React.useState(null);\n\n    useEffect(() => {\n        setFavPeople(favoritePeople);\n    }, [favoritePeople]);\n\n    const handleClick = (event: any) => {\n        setAnchorEl(event.currentTarget);\n    };\n\n    const handleClose = (person: string, isFav: boolean) => {\n        setAnchorEl(null);\n        if (isFav) {\n            const filteredFavs = favPeople.filter((p) => p !== person);\n            setFavPeople(filteredFavs);\n        } else {\n            setFavPeople([...favPeople, person]);\n        }\n        const act = isFav ? 'REMOVE' : 'ADD';\n        axios.put(`/users/${favKey}/${person}/${userId}`, {\n            action: act\n        }).then((response: any) => {\n            console.log(response);\n        })\n            .catch((error: any) => {\n                console.log('Error getting reviews', error);\n            });\n    };\n    const handleMenuClose = () => {\n        setAnchorEl(null);\n    };\n\n    return (\n        <>\n            <Button\n                onClick={handleClick}\n                endIcon={<DetailsIcon/>}\n                style={{ fontSize: '12px' }}\n            >\n                Add to favorites\n            </Button>\n            <Menu\n                id='simple-menu'\n                anchorEl={anchorEl}\n                keepMounted\n                open={Boolean(anchorEl)}\n                onClose={handleMenuClose}\n            >\n                {allPeople.map((p, index) => {\n                    const isFav = favPeople.includes(p);\n                    return (\n                        <MenuItem key={index} onClick={() => handleClose(p, isFav)}>\n                            {p}\n                            {isFav && <CheckIcon fontSize={'small'}/>}\n                        </MenuItem>);\n                })}\n            </Menu>\n        </>\n    );\n};\n\nexport default FavPeopleDropDown;\n","import React, {useEffect, useState} from 'react';\nimport Container from '../Container';\nimport Typography from '@material-ui/core/Typography';\nimport ReviewList from '../../components/ReviewList';\nimport { MediaType } from '../../constants/dataTypes';\nimport MockCover from '../../assets/MockCover.png';\nimport styled from 'styled-components';\nimport {Box, Grid} from '@material-ui/core';\nimport TagsSection from '../../components/TagsSection';\nimport StarRater from '../../components/StarRater';\nimport axios from 'axios';\nimport {connect} from 'react-redux';\nimport {loadAllReviewsAction} from '../../actions/reviewRatingActions';\nimport { FormControl, MenuItem, InputLabel, Select } from '@material-ui/core';\nimport AddToUserButton from '../../components/AddToUserButton';\nimport FavPeopleDropDown from '../../components/FavPeopleDropDown';\n\nconst StyledImage = styled.img`\n    width: 100%;\n    max-width: 300px;\n    margin-bottom: 15px;\n`;\n\nconst StyledGridItem = styled(Grid)`\n    text-align: center;\n`;\n\nconst VerticallyCenteredDiv = styled.div`\n    display: flex;\n    align-items: center;\n    margin-bottom: 10px;\n`;\n\nconst CenteredDiv = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 10px;\n`;\n\nconst StyledFormControl = styled(FormControl)`\n    width: 100%;\n    margin: 5px !important;\n`;\n\nconst MediaPage: React.FC<{}> = (props: any) => {\n    const [mediaType, id] = props.location.pathname.split('/').filter((o: string) => o);\n    const [isForLater, setForLater] = useState(false);\n    const [isFavorite, setFavorite] = useState(false);\n    const [watchedOrRead, setWatchedOrRead] = useState(false);\n    const [mediaObject, setMediaObject] = useState({\n        title: '',\n        id: id,\n        mediaType: MediaType.movie,\n        image: '',\n        people: [''],\n        genres: [''],\n        blurb: '',\n        avgRating: 0,\n        userRating: 0,\n        userHasReviewText: false\n    });\n    const [userLists, setUserLists] = useState({\n        booksRead: [],\n        moviesWatched: [],\n        watchLater: [],\n        readLater: [],\n        favoriteMovies: [],\n        favoriteBooks: [],\n        favoriteAuthors: [],\n        favoriteDirectors: []\n    });\n\n    const [storyTags, setStoryTags] = useState([]);\n    const [unaddedStoryTags, setUnaddedStoryTags] = useState<Array<{ tagId: string, tagName: string }>>([]);\n    const [addedStoryTags, setAddedStoryTags] = useState<Array<{ tagId: string, tagName: string }>>([]);\n\n    const sessionDataString = sessionStorage.getItem('NS-session-data');\n    const sessionDataObj = sessionDataString && JSON.parse(sessionDataString);\n    const userName = sessionDataObj.username;\n    const userId = sessionDataObj.userId;\n\n    const {\n        title,\n        image,\n        people,\n        blurb,\n        genres,\n        avgRating,\n        userRating,\n        userHasReviewText\n    } = mediaObject;\n\n    useEffect(() => {\n        const mediaRouteType = mediaType === MediaType.book ? 'books' : 'movies';\n        axios.get(`/${mediaRouteType}/${id}`)\n            .then((mediaRes: any) => {\n                axios.get(`/reviewRatings/${mediaType}/${id}`)\n                    .then((reviewRatingRes: any) => {\n                        const reviews = reviewRatingRes.data.reviewArray;\n                        props.loadAllReviewsAction(reviews);\n                        const userRatingReviewArr = reviews.filter((r: any) => r.userId === userId);\n                        const userRating = userRatingReviewArr.length > 0 ? userRatingReviewArr[0].rating : undefined;\n                        const userHasReviewText = userRatingReviewArr.length > 0 && !!userRatingReviewArr[0].text;\n                        setMediaObject({\n                            title: 'Mock Title Harry Potter',\n                            id: 'movie-001',\n                            mediaType: MediaType.movie,\n                            image: MockCover,\n                            people: ['J.K. Rowling', 'person1', 'person2', 'person3'],\n                            genres: ['fantasy', 'action', 'sci-fi', 'superheroes', 'tag1', 'tag2', 'tag3'],\n                            blurb: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.',\n                            avgRating: reviewRatingRes.data.average,\n                            userRating: userRating,\n                            userHasReviewText: userHasReviewText\n                        });\n                        setStoryTags(mediaRes.data.nextStoryTags);\n                    })\n                    .catch((error: any) => {\n                        console.log('Error getting reviews', error);\n                    });\n            })\n            .catch((error: any) => {\n                console.log('Error getting media', error);\n            });\n        // TODO get the media info from an api call using the media id\n    }, [props, id, mediaType, userId]);\n\n    useEffect(() => {\n        axios.get(`/users/userLists/${userId}`)\n            .then((response: any) => {\n                const userLists = response.data;\n                if (mediaType === MediaType.movie) {\n                    if (userLists.watchLater.includes(id)) {\n                        setForLater(true);\n                    }\n                    if (userLists.favoriteMovies.includes(id)) {\n                        setFavorite(true);\n                    }\n                    if (userLists.moviesWatched.includes(id)) {\n                        setWatchedOrRead(true);\n                    }\n                } else {\n                    if (userLists.readLater.includes(id)) {\n                        setForLater(true);\n                    }\n                    if (userLists.favoriteBooks.includes(id)) {\n                        setFavorite(true);\n                    }\n                    if (userLists.booksRead.includes(id)) {\n                        setWatchedOrRead(true);\n                    }\n                }\n                setUserLists({\n                    booksRead: userLists.booksRead,\n                    moviesWatched: userLists.moviesWatched,\n                    watchLater: userLists.watchLater,\n                    readLater: userLists.readLater,\n                    favoriteMovies: userLists.favoriteMovies,\n                    favoriteBooks: userLists.favoriteBooks,\n                    favoriteAuthors: userLists.favoriteAuthors,\n                    favoriteDirectors: userLists.favoriteDirectors\n                });\n            })\n            .catch((error: any) => {\n                console.log('Error getting media', error);\n            });\n    }, [userId, mediaType, id]);\n\n    useEffect(() => {\n        axios.get('/nextStoryTags')\n            .then((res: any) => {\n                const tagData = res.data;\n                const sortedTags = tagData.sort(function(a: any, b: any) {\n                    if(a.tagName < b.tagName) { return -1; }\n                    if(a.tagName > b.tagName) { return 1; }\n                    return 0;\n                });\n                const storyTagNames = storyTags.map((t: any) => t.tagName);\n                const unAdded: Array<{ tagId: string, tagName: string }> = [];\n                const added: Array<{ tagId: string, tagName: string }> = [];\n                sortedTags.forEach((t: any) => {\n                    if (storyTagNames.includes(t.tagName)) {\n                        added.push(t);\n                    } else unAdded.push(t);\n                });\n                setUnaddedStoryTags(unAdded);\n                setAddedStoryTags(added);\n            })\n            .catch((error: any) => {\n                console.log('Error getting all story tags', error);\n            });\n    }, [storyTags]);\n\n    const updateMediaInDB = (tagsArray: any[]) => {\n        const mediaRouteType = mediaType === MediaType.book ? 'books' : 'movies';\n        axios.put(`/${mediaRouteType}/updateNextStoryTags/${id}`,\n            { tagsArray: tagsArray })\n            .then((res: any) => {\n                console.log('updated tags for media', res.data);\n            }).catch((err: any) => {\n                console.log('error setting tags for media', err);\n            });\n    };\n\n    const addOrRemoveCall = (key: string, mediaId: string, action:string) => {\n        axios.put(`/users/${key}/${mediaId}/${userId}`, {\n            action:action\n        }).then((response: any) => {\n            console.log(response);\n        })\n            .catch((error: any) => {\n                console.log('Error getting reviews', error);\n            });\n    };\n\n    const addOrRemoveWatchOrRead = (mediaId: string) => {\n        const key = mediaType === MediaType.movie ? 'moviesWatched' : 'booksRead';\n        if (watchedOrRead) {\n            setWatchedOrRead(false);\n            addOrRemoveCall(key, mediaId, 'REMOVE');\n        } else {\n            setWatchedOrRead(true);\n            addOrRemoveCall(key, mediaId, 'ADD');\n        }\n    };\n\n    const addOrRemoveWatchReadLater = (mediaId: string) => {\n        console.log('watch or read later, mediaType: ', mediaType, 'id: ', mediaId);\n        const key = mediaType === MediaType.movie ? 'watchLater' : 'readLater';\n        if (isForLater) {\n            setForLater(false);\n            addOrRemoveCall(key, mediaId, 'REMOVE');\n        } else {\n            setForLater(true);\n            addOrRemoveCall(key, mediaId, 'ADD');\n        }\n    };\n\n    const addOrRemoveFavorites = (mediaId: string) => {\n        const key = mediaType === MediaType.movie ? 'favoriteMovies' : 'favoriteBooks';\n        if (isFavorite) {\n            setFavorite(false);\n            addOrRemoveCall(key, mediaId, 'REMOVE');\n        } else {\n            setFavorite(true);\n            addOrRemoveCall(key, mediaId, 'ADD');\n        }\n    };\n\n    const handleAddTag = (event: any) => {\n        console.log(event.target.value);\n        const newAddedTags = [...addedStoryTags, event.target.value];\n        const filteredDeleteTags = unaddedStoryTags.filter((t: any) => t.tagId !== event.target.value.tagId);\n        setAddedStoryTags(newAddedTags);\n        setUnaddedStoryTags(filteredDeleteTags);\n        updateMediaInDB(newAddedTags);\n    };\n\n    const handleDeleteTag = (event: any) => {\n        console.log(event.target.value);\n        const filteredStoryTags = addedStoryTags.filter((t: any) => t.tagId !== event.target.value.tagId);\n        const newDeleteTags = [...unaddedStoryTags, event.target.value];\n        setAddedStoryTags(filteredStoryTags);\n        setUnaddedStoryTags(newDeleteTags);\n        updateMediaInDB(filteredStoryTags);\n    };\n\n    return (\n        <>\n            <Container maxWidth='lg'>\n                <Grid container direction={'row'}  spacing={5}>\n                    <StyledGridItem item sm={3}>\n                        <StyledImage src={image} />\n                        <div>\n                            Your rating:\n                            <CenteredDiv>\n                                <StarRater\n                                    userRating={userRating}\n                                    readonly={false}\n                                    userId={userId}\n                                    userName={userName}\n                                    userHasReviewText={userHasReviewText}\n                                    mediaId={id}\n                                    mediaType={mediaType}\n                                />\n                            </CenteredDiv>\n                            <div>\n                                <AddToUserButton\n                                    toBackendOnClick={() => addOrRemoveWatchOrRead(id)}\n                                    isAdded={watchedOrRead}\n                                    addLabel={`Add to ${mediaType === MediaType.movie ? 'watched' : 'read'}`}\n                                    removeLabel={`Remove from ${mediaType === MediaType.movie ? 'watched' : 'read'}`}\n                                />\n                            </div>\n                            <div>\n                                <AddToUserButton\n                                    toBackendOnClick={() => addOrRemoveWatchReadLater(id)}\n                                    isAdded={isForLater}\n                                    addLabel={`Add to ${mediaType === MediaType.movie ? 'watch' : 'read'} later`}\n                                    removeLabel={`Remove from ${mediaType === MediaType.movie ? 'watch' : 'read'} later`}\n                                />\n                            </div>\n                            <div>\n                                <AddToUserButton\n                                    toBackendOnClick={() => addOrRemoveFavorites(id)}\n                                    isAdded={isFavorite}\n                                    addLabel={'Add favorite'}\n                                    removeLabel={'Remove favorite'}\n                                />\n                            </div>\n                        </div>\n                    </StyledGridItem>\n                    <Grid item sm={6}>\n                        <Typography variant='h1'>{title}</Typography>\n                        <Box fontStyle='italic'>\n                            <Typography variant='subtitle1' gutterBottom>\n                                {people.join(', ')}\n                                <FavPeopleDropDown\n                                    allPeople={people}\n                                    favoritePeople={MediaType.movie ? userLists.favoriteDirectors : userLists.favoriteAuthors}\n                                    userId={userId}\n                                    favKey={MediaType.movie ? 'favoriteDirectors' : 'favoriteAuthors'}\n                                />\n                            </Typography>\n                        </Box>\n                        <VerticallyCenteredDiv>\n                            <Typography variant='subtitle2' >Avg rating: </Typography>\n                            <StarRater readOnlyRating={avgRating} readonly />\n                        </VerticallyCenteredDiv>\n                        <Typography variant='body1'>{blurb}</Typography>\n                    </Grid>\n                    <Grid item sm={3}>\n                        Genres:\n                        <TagsSection tags={genres}/>\n                        Tags:\n                        <TagsSection tagObjects={addedStoryTags}/>\n                        <StyledFormControl variant='outlined'>\n                            <InputLabel id='demo-simple-select-outlined-label'>Add a tag</InputLabel>\n                            <Select\n                                labelId='add-tag-label'\n                                id='add-tag'\n                                value={''}\n                                onChange={handleAddTag}\n                                label='Add a tag'\n                            >\n                                {unaddedStoryTags.map((t: any, index) => {\n                                    return <MenuItem key={`${index}_add`} value={t}>{t.tagName}</MenuItem>;\n                                })}\n                            </Select>\n                        </StyledFormControl>\n                        <StyledFormControl variant='outlined'>\n                            <InputLabel id='demo-simple-select-outlined-label'>Delete a tag</InputLabel>\n                            <Select\n                                labelId='delete-tag-label'\n                                id='delete-tag'\n                                value={''}\n                                onChange={handleDeleteTag}\n                                label='Delete a tag'\n                            >\n                                {addedStoryTags.map((t: any, index) => {\n                                    return <MenuItem key={`${index}_delete`} value={t}>{t.tagName}</MenuItem>;\n                                })}\n                            </Select>\n                        </StyledFormControl>\n                    </Grid>\n                </Grid>\n            </Container>\n            <Container maxWidth='md'>\n                <ReviewList\n                    mediaId={id}\n                    mediaType={mediaType}\n                    userName={userName}\n                    userId={userId}\n                    userRating={userRating}\n                />\n            </Container>\n        </>\n    );\n};\n\nexport default connect(null, { loadAllReviewsAction })(MediaPage);\n"],"sourceRoot":""}