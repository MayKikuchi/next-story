(this["webpackJsonpnext-story"]=this["webpackJsonpnext-story"]||[]).push([[10],{158:function(e,t,n){"use strict";var a=n(22),r=n(0),i=n.n(r),o=n(138),c=n(17);function u(){var e=Object(a.a)(["\n    margin-top: 85px;\n"]);return u=function(){return e},e}var l=Object(c.b)(o.a)(u());t.a=function(e){return i.a.createElement(l,{maxWidth:e.maxWidth},e.children)}},162:function(e,t,n){e.exports=n.p+"static/media/MockCover.4d59545d.png"},163:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.movie="movie",e.book="book"}(a||(a={}))},174:function(e,t,n){"use strict";var a=n(22),r=n(0),i=n.n(r),o=n(17);function c(){var e=Object(a.a)(["\n    border-radius: 7px;\n    color: white;\n    outline: none;\n    border: none;\n    margin: 5px;\n    cursor: pointer;\n    background-color: ",";\n    &:hover {\n        background-color: ",";\n    }\n    font-size: 16px;\n    padding: 3px 5px 3px 5px;\n"]);return c=function(){return e},e}var u=o.b.button(c(),(function(e){return e.theme.palette.primary.light}),(function(e){return e.theme.palette.secondary.light})),l=function(e){var t=e.tag;return i.a.createElement(i.a.Fragment,null,t&&i.a.createElement(u,null,t))};function s(){var e=Object(a.a)(["\n    margin-bottom: 15px;\n"]);return s=function(){return e},e}var d=o.b.div(s());t.a=function(e){var t=e.tags,n=e.tagObjects;return i.a.createElement(d,null,t&&t.map((function(e,t){return i.a.createElement(l,{key:t,tag:e})})),!t&&n&&n.map((function(e,t){return i.a.createElement(l,{key:t,tag:e.tagName})})))}},348:function(e,t,n){"use strict";n.r(t);var a=n(42),r=n(22),i=n(0),o=n.n(i),c=n(158),u=n(140),l=n(17),s=n(334);function d(){var e=Object(r.a)(["\n    margin-right: 10px;\n    background: none;\n    border: none;\n    color: "," || ",";\n    cursor: pointer;\n    font-size: ",";\n\n    &:hover {\n        color: ",";\n    }\n"]);return d=function(){return e},e}var m=l.b.button(d(),(function(e){return e.color}),(function(e){return e.theme.palette.grey[500]}),(function(e){return e.fontSize||"16px"}),(function(e){return e.theme.palette.primary.main})),v=function(e){var t=e.onClick,n=e.label,a=e.children,r=e.color;return o.a.createElement(m,{onClick:t,color:r},n||a)},f=n(72),g=n(35),b=n(164),p=n.n(b);function h(){var e=Object(r.a)(['\n    height: 100px;\n    width: 99%;\n    resize: vertical;\n    font-family: "Roboto", "Helvetica", "Arial", sans-serif\n']);return h=function(){return e},e}var E,x=l.b.textarea(h());!function(e){e[e.Add=0]="Add",e[e.Edit=1]="Edit"}(E||(E={}));var w=window.location.protocol+"//"+window.location.host,y=Object(f.b)(null,{addReviewAction:function(e){return{type:g.a,text:e.text,userId:e.userId,userName:e.userName,datePosted:e.datePosted}},editReviewAction:function(e){return{type:g.d,text:e.text,userId:e.userId,userName:e.userName,datePosted:e.datePosted}}})((function(e){var t,n=Object(i.useState)((null===(t=e.editCommentProps)||void 0===t?void 0:t.review.text)||""),r=Object(a.a)(n,2),c=r[0],u=r[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(x,{value:c,onChange:function(e){u(e.target.value)}}),o.a.createElement("div",{style:{textAlign:"right"}},o.a.createElement(v,{onClick:function(){var t=e.editCommentProps,n=e.addCommentProps,a=(new Date).toString();switch(e.actionType){case E.Add:e.addReviewAction({text:c,userId:n.userId,userName:n.userName,datePosted:a,rating:void 0}),p.a.put(w+"/reviewRatings/review",{mediaId:n.mediaId,mediaType:n.mediaType,userName:n.userName,userId:n.userId,rating:n.userRating,datePosted:a,text:c}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}));break;case E.Edit:var r=t.review.userId;e.editReviewAction({text:c,userId:r,userName:t.review.userName,datePosted:a}),p.a.put(w+"/reviewRatings/review",{mediaId:t.mediaId,mediaType:t.mediaType,userName:t.review.userName,userId:t.review.userId,rating:t.userRating,datePosted:a,text:c}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}));break;default:return}e.closeEdit()}},"Submit"),o.a.createElement(v,{onClick:e.closeEdit},"Cancel")))})),O=n(250),R=n.n(O);var j=n(63),I=n(331),k=n.n(I),C=n(146),A=n(330),T=n.n(A),S=n(332),N=n.n(S);function F(){var e=Object(r.a)(["\n    display: flex;\n    align-items: center;\n"]);return F=function(){return e},e}function U(){var e=Object(r.a)(["\n    padding: 0px !important;\n"]);return U=function(){return e},e}var L=window.location.protocol+"//"+window.location.host,P=Object(l.b)(C.a)(U()),D=l.b.div(F()),M=Object(f.b)(null,{changeRatingAction:function(e){return{type:g.b,userId:e.userId,userName:e.userName,rating:e.rating}}})((function(e){var t=Object(i.useState)(0),n=Object(a.a)(t,2),r=n[0],c=n[1],u=e.readonly,l=e.readOnlyRating,d=e.hideReadOnlyLabel,m=e.userRating,v=e.userId,f=e.userName,g="";function b(t){var n=r===t?t-1:t;c(n),v&&f&&function(e,t,n,a){e.changeRatingAction({userId:t,userName:n,rating:a}),a||e.userHasReviewText?p.a.put(L+"/reviewRatings/rating",{mediaId:e.mediaId,mediaType:e.mediaType,userId:t,rating:a}).then((function(e){console.log("Successfully put the rating: ",e)})).catch((function(e){console.log(e)})):p.a.delete(L+"/reviewRatings"+"/".concat(e.mediaType,"/").concat(e.mediaId,"/").concat(t)).then((function(e){console.log("Successfully deleted the reviewRating",e)})).catch((function(e){console.log(e)}))}(e,v,f,n)}return u&&l?g=l.toFixed(2):m&&(g=m.toFixed(2)),Object(i.useEffect)((function(){r||c(m||0)}),[m]),o.a.createElement(s.a,{display:"flex"},Object(j.a)(Array(5)).map((function(e,t){return o.a.createElement(D,{key:t},u?o.a.createElement(o.a.Fragment,null,function(e,t){var n=((null===t||void 0===t?void 0:t.toFixed(2))||"0.00").split("."),r=Object(a.a)(n,2),i=r[0],c=r[1],u=parseInt(i),l=parseInt(c);if(e+1<=u)return o.a.createElement(T.a,{style:{fill:"#FFCC00"},fontSize:"small"});if(e!==u)return o.a.createElement(k.a,{style:{fill:"#FFCC00"},fontSize:"small"});var s=50*Math.round(l/50);return 0===s?o.a.createElement(k.a,{style:{fill:"#FFCC00"},fontSize:"small"}):50===s?o.a.createElement(N.a,{style:{fill:"#FFCC00"},fontSize:"small"}):100===s?o.a.createElement(T.a,{style:{fill:"#FFCC00"},fontSize:"small"}):void 0}(t,l)):o.a.createElement(P,{size:"small",onClick:function(){return b(t+1)}},t<r?o.a.createElement(T.a,{style:{fill:"#FFCC00"}}):o.a.createElement(k.a,{style:{fill:"#FFCC00"}})))})),o.a.createElement(s.a,{ml:1},u&&!d&&g))}));function z(){var e=Object(r.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 10px;\n"]);return z=function(){return e},e}function W(){var e=Object(r.a)(["\n    border: none;\n    outline: none;\n    background-color: rgba(255, 255, 255, 0.90);\n    text-align: center;\n    height: 30px;\n    cursor: pointer;\n    padding: 0px;\n    width: 100%;\n    &:hover {\n        background-color: ",";\n    }\n    margin-bottom: 5px;\n"]);return W=function(){return e},e}function H(){var e=Object(r.a)(["\n    border: none;\n    box-shadow: 0px 0 5px rgba(0, 0, 0, 0.3);\n    outline: none;\n    background-color: rgba(255, 255, 255, 0.75);\n    text-align: center;\n    height: 30px;\n    cursor: pointer;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    padding: 0px;\n    width: 100%;\n    backdrop-filter: blur(1.5px);\n"]);return H=function(){return e},e}function B(){var e=Object(r.a)(["\n    max-height: ",";\n    overflow: ",";\n    position: relative;\n"]);return B=function(){return e},e}function q(){var e=Object(r.a)(["\n    display: flex;\n    justify-content: space-between;\n"]);return q=function(){return e},e}function J(){var e=Object(r.a)(["\n    border-top: ",";\n    border: ",";\n    min-height: 50px;\n    padding: 5px;\n    padding-bottom: 0px;\n"]);return J=function(){return e},e}var V=l.b.div(J(),(function(e){var t=e.theme;return"2px solid ".concat(t.palette.grey[400])}),(function(e){var t=e.theme;return e.isCurrentUserComment&&"2px solid ".concat(t.palette.grey[400])})),G=l.b.div(q()),K=l.b.div(B(),(function(e){return e.expanded?"":"200px"}),(function(e){return e.expanded?"visible":"hidden"})),Y=l.b.button(H()),Q=l.b.button(W(),(function(e){return e.theme.palette.grey[200]})),X=l.b.div(z()),Z=window.location.protocol+"//"+window.location.host;var $=Object(f.b)(null,{deleteReviewAction:function(e){return{type:g.c,userId:e}}})((function(e){var t=Object(i.useState)(!1),n=Object(a.a)(t,2),r=n[0],c=n[1],l=Object(i.useState)(!1),d=Object(a.a)(l,2),m=d[0],f=d[1],g=Object(i.useState)(!1),b=Object(a.a)(g,2),h=b[0],x=b[1],w=Object(i.useRef)(null),O=e.review,j=e.currentUserId,I=e.isCurrentUserComment,k=new Date(O.datePosted).toDateString(),C=Object(i.useMemo)((function(){return j===O.userId}),[O,j]);return Object(i.useEffect)((function(){var e=function(e){var t=e.current;return t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth}(w);x(!!e)}),[O]),o.a.createElement(o.a.Fragment,null,o.a.createElement(V,{isCurrentUserComment:I},r?o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{variant:"h5"},o.a.createElement("strong",null,O.userName)),o.a.createElement(y,{actionType:E.Edit,closeEdit:function(){return c(!1)},editCommentProps:e})):o.a.createElement(K,{expanded:m,ref:w},o.a.createElement(G,null,o.a.createElement(u.a,{variant:"h5"},o.a.createElement("strong",null,O.userName)," on ".concat(k)),C&&o.a.createElement("div",null,o.a.createElement(v,{onClick:function(){return c(!0)}},"Edit"),o.a.createElement(v,{onClick:function(){return function(e){var t=e.review.userId,n=e.review.userName;e.deleteReviewAction(t),e.userRating?p.a.put(Z+"/reviewRatings/review",{mediaId:e.mediaId,mediaType:e.mediaType,userName:n,userId:t,datePosted:"",text:""}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})):p.a.delete(Z+"/reviewRatings"+"/".concat(e.mediaType,"/").concat(e.mediaId,"/").concat(e.review.userId)).then((function(e){console.log("successfully deleted the reviewRating",e)})).catch((function(e){console.log(e)}))}(e)}},"Delete"))),o.a.createElement(X,null,o.a.createElement(s.a,{mr:1},"User rated: "),O.rating?o.a.createElement(M,{readonly:!0,readOnlyRating:O.rating,hideReadOnlyLabel:!0}):"no rating"),o.a.createElement(R.a,{source:O.text}),!m&&h&&o.a.createElement(Y,{onClick:function(){return f(!0)}},o.a.createElement(u.a,{variant:"body1"},"Show more...")),m&&o.a.createElement(Q,{onClick:function(){return f(!1)}},o.a.createElement(u.a,{variant:"body1"},"Show less")))))})),_=n(333),ee=Object(f.b)((function(e,t){var n=e.reviewRatings.filter((function(e){return e.text})),a=[],r=void 0;return n.forEach((function(e){e.userId===t.userId?r=e:a.push(e)})),{otherUserReviews:a,currentUserReview:r}}))((function(e){var t=Object(i.useState)(!1),n=Object(a.a)(t,2),r=n[0],c=n[1],l=e.otherUserReviews,s=e.currentUserReview,d=e.mediaId,m=e.mediaType,f=e.userId,g=e.userName,b=e.userRating,p=!!s,h=null===l||void 0===l?void 0:l.slice(0,9),x=Object(i.useState)(h),w=Object(a.a)(x,2),O=w[0],R=w[1];Object(i.useEffect)((function(){var e=null===l||void 0===l?void 0:l.slice(0,9);R(e)}),[l]);var j=p?l.length+1:l.length;return o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{variant:"h3",gutterBottom:!0},j||0," Total Reviews"),r?o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{variant:"h5"},o.a.createElement("strong",null,g)),o.a.createElement(y,{actionType:E.Add,closeEdit:function(){return c(!1)},addCommentProps:{mediaType:m,mediaId:d,userId:f,userName:g,userRating:b}})):o.a.createElement("div",{style:{textAlign:"right"}},!p&&o.a.createElement(v,{onClick:function(){return c(!0)}},"Add Review")),s&&s.text&&o.a.createElement(o.a.Fragment,null,o.a.createElement($,{review:s,currentUserId:f,isCurrentUserComment:!0,mediaId:d,mediaType:m,userRating:b})),o.a.createElement("br",null),l?o.a.createElement(_.a,{dataLength:O.length,next:function(){setTimeout((function(){var e=O.length+5,t=l.slice(0,e);R(t)}),1e3)},hasMore:O.length<l.length,loader:o.a.createElement("h4",{style:{textAlign:"center"}},"Loading more reviews..."),endMessage:o.a.createElement("p",{style:{textAlign:"center"}},o.a.createElement("b",null,"No more reviews"))},O.map((function(e,t){return o.a.createElement($,{key:t,review:e,currentUserId:f})}))):null)})),te=n(163),ne=n(162),ae=n.n(ne),re=n(230),ie=n(174);function oe(){var e=Object(r.a)(["\n    background-color: ",";\n    border: none;\n    outline: none;\n    font-size: 16px;\n    border-radius: 5px;\n    padding: 5px;\n    cursor: pointer;\n    margin: 5px;\n    color: ",";\n"]);return oe=function(){return e},e}function ce(){var e=Object(r.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 10px;\n"]);return ce=function(){return e},e}function ue(){var e=Object(r.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 10px;\n"]);return ue=function(){return e},e}function le(){var e=Object(r.a)(["\n    text-align: center;\n"]);return le=function(){return e},e}function se(){var e=Object(r.a)(["\n    width: 100%;\n    max-width: 300px;\n    margin-bottom: 15px;\n"]);return se=function(){return e},e}var de=window.location.protocol+"//"+window.location.host,me=l.b.img(se()),ve=Object(l.b)(re.a)(le()),fe=l.b.div(ue()),ge=l.b.div(ce()),be=l.b.button(oe(),(function(e){var t=e.theme;return e.isAddedToUser?t.palette.grey[300]:t.palette.primary.light}),(function(e){return e.isAddedToUser?"black":"white"}));t.default=Object(f.b)(null,{loadAllReviewsAction:function(e){return{type:g.e,reviewsArray:e}}})((function(e){var t=e.match.params,n=t.id,r=t.mediaType,l=Object(i.useState)(!1),d=Object(a.a)(l,2),m=d[0],v=d[1],f=Object(i.useState)(!1),g=Object(a.a)(f,2),b=g[0],h=g[1],E=Object(i.useState)(!1),x=Object(a.a)(E,2),w=x[0],y=x[1],O=Object(i.useState)({title:"",id:n,mediaType:te.a.movie,image:"",people:"",genres:[""],nextStoryTags:[{tagId:"",tagName:""}],blurb:"",avgRating:0,userRating:0,userHasReviewText:!1}),R=Object(a.a)(O,2),j=R[0],I=R[1],k=Object(i.useState)({booksRead:[],moviesWatched:[],watchLater:[],readLater:[],favoriteMovies:[],favoriteBooks:[],favoriteAuthors:[],favoriteDirectors:[]}),C=Object(a.a)(k,2),A=(C[0],C[1]),T="user-000",S=j.title,N=j.image,F=j.people,U=j.blurb,L=j.genres,P=j.nextStoryTags,D=j.avgRating,z=j.userRating,W=j.userHasReviewText;Object(i.useEffect)((function(){var t=r===te.a.book?"books":"movies";p.a.get(de+"/".concat(t,"/").concat(n)).then((function(t){p.a.get(de+"/reviewRatings/".concat(r,"/").concat(n)).then((function(n){var a=n.data.reviewArray;e.loadAllReviewsAction(a);var r=a.filter((function(e){return e.userId===T})),i=r.length>0?r[0].rating:void 0,o=r.length>0&&!!r[0].text;I({title:"Mock Title Harry Potter",id:"movie-001",mediaType:te.a.movie,image:ae.a,people:"J.K. Rowling",genres:["fantasy","action","sci-fi","superheroes","tag1","tag2","tag3"],nextStoryTags:t.data.nextStoryTags,blurb:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",avgRating:n.data.average,userRating:i,userHasReviewText:o})})).catch((function(e){console.log("Error getting reviews",e)}))})).catch((function(e){console.log("Error getting media",e)}))}),[e,n,r]),Object(i.useEffect)((function(){p.a.get(de+"/users/userLists/".concat(T)).then((function(e){var t=e.data;r===te.a.movie?(t.watchLater.includes(n)&&v(!0),t.favoriteMovies.includes(n)&&h(!0),t.moviesWatched.includes(n)&&y(!0)):(t.readLater.includes(n)&&v(!0),t.favoriteBooks.includes(n)&&h(!0),t.booksRead.includes(n)&&y(!0)),A({booksRead:t.booksRead,moviesWatched:t.moviesWatched,watchLater:t.watchLater,readLater:t.readLater,favoriteMovies:t.favoriteMovies,favoriteBooks:t.favoriteBooks,favoriteAuthors:t.favoriteAuthors,favoriteDirectors:t.favoriteDirectors})})).catch((function(e){console.log("Error getting media",e)}))}),[T,r]);var H=function(e,t,n){p.a.put(de+"/users/".concat(e,"/").concat(t,"/").concat(T),{action:n}).then((function(e){console.log(e)})).catch((function(e){console.log("Error getting reviews",e)}))};return o.a.createElement(o.a.Fragment,null,o.a.createElement(c.a,{maxWidth:"lg"},o.a.createElement(re.a,{container:!0,direction:"row",spacing:5},o.a.createElement(ve,{item:!0,sm:3},o.a.createElement(me,{src:N}),o.a.createElement("div",null,"Your rating:",o.a.createElement(ge,null,o.a.createElement(M,{userRating:z,readonly:!1,userId:T,userName:"tempName",userHasReviewText:W,mediaId:n,mediaType:r})),o.a.createElement("div",null,o.a.createElement(be,{onClick:function(){return function(e){var t=r===te.a.movie?"moviesWatched":"booksRead";w?(y(!1),H(t,e,"REMOVE")):(y(!0),H(t,e,"ADD"))}(n)},isAddedToUser:w},"".concat(w?"Remove from":"Add to"," ").concat(r===te.a.movie?"watched":"read"))),o.a.createElement("div",null,o.a.createElement(be,{onClick:function(){return function(e){console.log("watch or read later, mediaType: ",r,"id: ",e);var t=r===te.a.movie?"watchLater":"readLater";m?(v(!1),H(t,e,"REMOVE")):(v(!0),H(t,e,"ADD"))}(n)},isAddedToUser:m},"".concat(m?"Remove from":"Add to"," ").concat(r===te.a.movie?"watch":"read"," later"))),o.a.createElement("div",null,o.a.createElement(be,{onClick:function(){return function(e){var t=r===te.a.movie?"favoriteMovies":"favoriteBooks";b?(h(!1),H(t,e,"REMOVE")):(h(!0),H(t,e,"ADD"))}(n)},isAddedToUser:b},b?"Remove favorite":"Add favorite")))),o.a.createElement(re.a,{item:!0,sm:6},o.a.createElement(u.a,{variant:"h1"},S),o.a.createElement(s.a,{fontStyle:"italic"},o.a.createElement(u.a,{variant:"subtitle1",gutterBottom:!0},F)),o.a.createElement(fe,null,o.a.createElement(u.a,{variant:"subtitle2"},"Avg rating: "),o.a.createElement(M,{readOnlyRating:D,readonly:!0})),o.a.createElement(u.a,{variant:"body1"},U)),o.a.createElement(re.a,{item:!0,sm:3},"Genres:",o.a.createElement(ie.a,{tags:L}),"Tags:",o.a.createElement(ie.a,{tagObjects:P})))),o.a.createElement(c.a,{maxWidth:"md"},o.a.createElement(ee,{mediaId:n,mediaType:r,userName:"tempName",userId:T,userRating:z})))}))}}]);
//# sourceMappingURL=10.7b1a81a2.chunk.js.map