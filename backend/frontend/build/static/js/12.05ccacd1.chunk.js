(this["webpackJsonpnext-story"]=this["webpackJsonpnext-story"]||[]).push([[12],{157:function(e,a,t){"use strict";var n=t(22),o=t(0),r=t.n(o),i=t(138),s=t(17);function l(){var e=Object(n.a)(["\n    margin-top: 85px;\n"]);return l=function(){return e},e}var c=Object(s.b)(i.a)(l());a.a=function(e){return r.a.createElement(c,{maxWidth:e.maxWidth},e.children)}},169:function(e,a,t){},354:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),r=(t(187),t(169),t(42)),i=t(356),s=t(143),l=t(344),c=t(353),m=t(342),u=t(231),d=t(347),g=t(197),p=t.n(g),f=t(140),b=t(343),v=t(138),E=t(160),h=t.n(E),j=t(9),S=t(196);function O(){return o.a.createElement(f.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",o.a.createElement(m.a,{color:"inherit",href:"https://material-ui.com/"},"NextStory")," ",(new Date).getFullYear(),".")}var x=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function y(){var e=x(),a=Object(n.useState)(!1),t=Object(r.a)(a,2),g=t[0],b=t[1],E=Object(n.useState)(""),y=Object(r.a)(E,2),w=y[0],N=y[1],C=Object(n.useState)(""),k=Object(r.a)(C,2),I=k[0],W=k[1],L=Object(n.useState)(""),P=Object(r.a)(L,2),D=P[0],G=P[1],F=Object(n.useState)(""),T=Object(r.a)(F,2),q=T[0],J=T[1],A=Object(n.useState)(""),U=Object(r.a)(A,2),Y=U[0],_=U[1],R=Object(n.useState)(!1),V=Object(r.a)(R,2),z=V[0],B=V[1],H=Object(n.useState)(!1),K=Object(r.a)(H,2),M=K[0],Q=K[1],X=Object(j.g)(),Z=window.location.protocol+"//"+window.location.host;Object(n.useEffect)((function(){var e=sessionStorage.getItem("NS-session-data"),a=e&&JSON.parse(e),t=null===a||void 0===a?void 0:a.expiry,n=t&&new Date(t)>new Date,o=null===a||void 0===a?void 0:a.isGoogleLogin;B(n),Q(o)}),[]);var $=function(e,a){h.a.post(Z+"/users/signUp",e).then((function(e){var t=e.data.userId,n=e.data.name,o=new Date;o.setSeconds(o.getSeconds()+3599);var r={expiry:o,username:n,userId:t,isGoogleLogin:a};sessionStorage.setItem("NS-session-data",JSON.stringify(r)),X.push("/")})).catch((function(e){b(!0);var a=e.response.data.message;N(a),console.log("Error signing up",e)}))};return o.a.createElement(v.a,{component:"main",maxWidth:"xs"},o.a.createElement(l.a,null),o.a.createElement("div",{className:e.paper},o.a.createElement(i.a,{className:e.avatar},o.a.createElement(p.a,null)),o.a.createElement(f.a,{component:"h1",variant:"h5"},"Sign up"),z?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{color:"red",margin:"20px"}},"You are already signed in"),o.a.createElement(m.a,{href:"/",variant:"body2"},"Go to home"),o.a.createElement("div",{style:{margin:"10px"}},"Or"),M?o.a.createElement(S.GoogleLogout,{clientId:"279438615331-cvlr0tk0j35i4s9df4m51o9sb5uj8k3s.apps.googleusercontent.com",buttonText:"Logout",onLogoutSuccess:function(){console.log("google logout success"),sessionStorage.removeItem("NS-session-data"),B(!1),Q(!1)}}):o.a.createElement(s.a,{color:"primary",onClick:function(){console.log("logout success"),sessionStorage.removeItem("NS-session-data"),B(!1),Q(!1)}},"Logout")):o.a.createElement("form",{className:e.form,noValidate:!0,onSubmit:function(e){return e.preventDefault(),I&&D&&q&&Y?q!==Y?(b(!0),void N("Passwords do not match")):(b(!1),void $({userName:I,email:D,textPass:q},!1)):(b(!0),void N("All fields must be filled in"))}},o.a.createElement(u.a,{container:!0,spacing:2},o.a.createElement(u.a,{item:!0,xs:12},o.a.createElement(c.a,{autoComplete:"name",name:"userName",variant:"outlined",required:!0,fullWidth:!0,id:"userName",label:"User Name",onChange:function(e){W(e.target.value)},autoFocus:!0})),o.a.createElement(u.a,{item:!0,xs:12},o.a.createElement(c.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:function(e){G(e.target.value),b(!1),N("")}})),o.a.createElement(u.a,{item:!0,xs:12},o.a.createElement(c.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){J(e.target.value)}})),o.a.createElement(u.a,{item:!0,xs:12},o.a.createElement(c.a,{variant:"outlined",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm Password",type:"password",id:"confirmPassword",autoComplete:"confirm-password",onChange:function(e){_(e.target.value)}})),g&&o.a.createElement(u.a,{item:!0,xs:12},o.a.createElement("div",{style:{color:"red"}},w||"There was an error signing up"))),o.a.createElement(s.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign Up"),o.a.createElement("span",{style:{marginRight:"5px"}},"Or sign up with Google"),o.a.createElement(S.GoogleLogin,{clientId:"279438615331-cvlr0tk0j35i4s9df4m51o9sb5uj8k3s.apps.googleusercontent.com",buttonText:"Sign up",onSuccess:function(e){console.log("response: ",e),b(!1);var a=e.profileObj.name,t=e.profileObj.email;t&&$({userName:a,email:t},!0)},onFailure:function(e){console.log("onFailure"),console.log("response: ",e),b(!0)},cookiePolicy:"single_host_origin"}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(u.a,{container:!0,justify:"flex-end"},o.a.createElement(u.a,{item:!0},o.a.createElement(m.a,{href:"/login",variant:"body2"},"Already have an account? Login"))))),o.a.createElement(d.a,{mt:5},o.a.createElement(O,null)))}var w=t(157);a.default=function(){return o.a.createElement(w.a,{maxWidth:"md"},o.a.createElement(y,null))}}}]);
//# sourceMappingURL=12.05ccacd1.chunk.js.map